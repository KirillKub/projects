!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)r(n,a)&&(e[a]=n[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,a,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+a),r);else for(var i=0;i<a;i++)e[r+i]=t[n+i]},flattenChunks:function(e){var t,n,a,r,i,s;for(a=0,t=0,n=e.length;t<n;t++)a+=e[t].length;for(s=new Uint8Array(a),r=0,t=0,n=e.length;t<n;t++)i=e[t],s.set(i,r),r+=i.length;return s}},s={arraySet:function(e,t,n,a,r){for(var i=0;i<a;i++)e[r+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(a)},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";e.exports=function(e,t,n,a){for(var r=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{i=i+(r=r+t[a++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0}},function(e,t,n){"use strict";var a=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,r){var i=a,s=r+n;e^=-1;for(var o=r;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}},function(e,t,n){"use strict";var a=n(0),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var s=new a.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&i||!e.subarray&&r))return String.fromCharCode.apply(null,a.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,t.string2buf=function(e){var t,n,r,i,s,o=e.length,l=0;for(i=0;i<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new a.Buf8(l),s=0,i=0;s<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new a.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,a,r,i,o=t||e.length,d=new Array(2*o);for(a=0,n=0;n<o;)if((r=e[n++])<128)d[a++]=r;else if((i=s[r])>4)d[a++]=65533,n+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&n<o;)r=r<<6|63&e[n++],i--;i>1?d[a++]=65533:r<65536?d[a++]=r:(r-=65536,d[a++]=55296|r>>10&1023,d[a++]=56320|1023&r)}return l(d,a)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){GIFEncoder=function(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function n(){this.bin=[]}n.prototype.getData=function(){for(var e="",n=this.bin.length,a=0;a<n;a++)e+=t[this.bin[a]];return e},n.prototype.writeByte=function(e){this.bin.push(e)},n.prototype.writeUTFBytes=function(e){for(var t=e.length,n=0;n<t;n++)this.writeByte(e.charCodeAt(n))},n.prototype.writeBytes=function(e,t,n){for(var a=n||e.length,r=t||0;r<a;r++)this.writeByte(e[r])};var a,r,i,s,o,l,d,c,f,u={},h=null,_=-1,m=0,g=!1,p=[],v=7,w=-1,b=!1,y=!0,k=!1,B=10,I="Generated by jsgif (https://github.com/antimatter15/jsgif/)",E=(u.setDelay=function(e){m=Math.round(e/10)},u.setDispose=function(e){e>=0&&(w=e)},u.setRepeat=function(e){e>=0&&(_=e)},u.setTransparent=function(e){h=e},u.setComment=function(e){I=e},u.addFrame=function(e,t){if(null===e||!g||null===s)throw new Error("Please call start method before calling addFrame");var n=!0;try{t?e instanceof ImageData?(o=e.data,sizeset&&a==e.width&&r==e.height||x(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==a*r*4?o=e:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(o=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,k||x(e.canvas.width,e.canvas.height)),L(),z(),y&&(R(),D(),_>=0&&T()),A(),""!==I&&U(),C(),y||D(),Z(),y=!1}catch(e){n=!1}return n},u.download=function(e){if(null===s||0==b)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?e.endsWith(".gif")?e:e+".gif":"download.gif";var t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(s.bin)],{type:"image/gif"})),t.click()}},u.finish=function(){if(!g)return!1;var e=!0;g=!1;try{s.writeByte(59),b=!0}catch(t){e=!1}return e},function(){i=0,o=null,l=null,d=null,f=null,b=!1,y=!0}),x=(u.setFrameRate=function(e){15!=e&&(m=Math.round(100/e))},u.setQuality=function(e){e<1&&(e=1),B=e},u.setSize=function(e,t){g&&!y||((a=e)<1&&(a=320),(r=t)<1&&(r=240),k=!0)}),z=(u.start=function(){E();var e=!0;b=!1,s=new n;try{s.writeUTFBytes("GIF89a")}catch(t){e=!1}return g=e},u.cont=function(){E();return b=!1,s=new n,g=!0},function(){var e=l.length,t=e/3;d=[];var n=new NeuQuant(l,e,B);f=n.process();for(var a=0,r=0;r<t;r++){var s=n.map(255&l[a++],255&l[a++],255&l[a++]);p[s]=!0,d[r]=s}l=null,c=8,v=7,null!==h&&(i=S(h))}),S=function(e){if(null===f)return-1;for(var t=(16711680&e)>>16,n=(65280&e)>>8,a=255&e,r=0,i=16777216,s=f.length,o=0;o<s;){var l=t-(255&f[o++]),d=n-(255&f[o++]),c=a-(255&f[o]),u=l*l+d*d+c*c,h=o/3;p[h]&&u<i&&(i=u,r=h),o++}return r},L=function(){var e=a,t=r;l=[];for(var n=o,i=0,s=0;s<t;s++)for(var d=0;d<e;d++){var c=s*e*4+4*d;l[i++]=n[c],l[i++]=n[c+1],l[i++]=n[c+2]}},A=function(){var e,t;s.writeByte(33),s.writeByte(249),s.writeByte(4),null===h?(e=0,t=0):(e=1,t=2),w>=0&&(t=7&w),t<<=2,s.writeByte(0|t|e),N(m),s.writeByte(i),s.writeByte(0)},U=function(){s.writeByte(33),s.writeByte(254),s.writeByte(I.length),s.writeUTFBytes(I),s.writeByte(0)},C=function(){s.writeByte(44),N(0),N(0),N(a),N(r),y?s.writeByte(0):s.writeByte(128|v)},R=function(){N(a),N(r),s.writeByte(240|v),s.writeByte(0),s.writeByte(0)},T=function(){s.writeByte(33),s.writeByte(255),s.writeByte(11),s.writeUTFBytes("NETSCAPE2.0"),s.writeByte(3),s.writeByte(1),N(_),s.writeByte(0)},D=function(){s.writeBytes(f);for(var e=768-f.length,t=0;t<e;t++)s.writeByte(0)},N=function(e){s.writeByte(255&e),s.writeByte(e>>8&255)},Z=function(){new LZWEncoder(a,r,d,c).encode(s)};u.stream=function(){return s},u.setProperties=function(e,t){g=e,y=t};return u}},function(e,t){LZWEncoder=function(){var e,t,n,a,r,i,s,o,l,d,c,f,u={},h=-1,_=12,m=5003,g=_,p=1<<_,v=[],w=[],b=m,y=0,k=!1,B=0,I=0,E=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],x=[],z=u.LZWEncoder=function(r,i,s,o){e=r,t=i,n=s,a=Math.max(2,o)},S=function(e,t){x[f++]=e,f>=254&&C(t)},L=function(e){A(b),y=d+2,k=!0,D(d,e)},A=function(e){for(var t=0;t<e;++t)v[t]=-1},U=u.compress=function(e,t){var n,a,r,i,u,_,m;for(k=!1,o=R(s=l=e),c=(d=1<<e-1)+1,y=d+2,f=0,i=T(),m=0,n=b;n<65536;n*=2)++m;m=8-m,A(_=b),D(d,t);e:for(;(r=T())!=h;)if(n=(r<<g)+i,v[a=r<<m^i]!=n){if(v[a]>=0){u=_-a,0===a&&(u=1);do{if((a-=u)<0&&(a+=_),v[a]==n){i=w[a];continue e}}while(v[a]>=0)}D(i,t),i=r,y<p?(w[a]=y++,v[a]=n):L(t)}else i=w[a];D(i,t),D(c,t)},C=(u.encode=function(n){n.writeByte(a),r=e*t,i=0,U(a+1,n),n.writeByte(0)},function(e){f>0&&(e.writeByte(f),e.writeBytes(x,0,f),f=0)}),R=function(e){return(1<<e)-1},T=function(){return 0===r?h:(--r,255&n[i++])},D=function(e,t){for(B&=E[I],I>0?B|=e<<I:B=e,I+=s;I>=8;)S(255&B,t),B>>=8,I-=8;if((y>o||k)&&(k?(o=R(s=l),k=!1):(++s,o=s==g?p:R(s))),e==c){for(;I>0;)S(255&B,t),B>>=8,I-=8;C(t)}};return z.apply(this,arguments),u}},function(e,t){NeuQuant=function(){var e,t,n,a,r,i={},s=256,o=499,l=491,d=487,c=503,f=3*c,u=s-1,h=4,_=100,m=16,g=1<<m,p=10,v=10,w=g>>v,b=g<<p-v,y=s>>3,k=6,B=1<<k,I=y*B,E=30,x=10,z=1<<x,S=8,L=1<<S,A=x+S,U=1<<A,C=[],R=[],T=[],D=[],N=i.NeuQuant=function(e,i,o){var l,d;for(t=e,n=i,a=o,r=new Array(s),l=0;l<s;l++)r[l]=new Array(4),(d=r[l])[0]=d[1]=d[2]=(l<<h+8)/s,T[l]=g/s,R[l]=0},Z=function(){for(var e=[],t=new Array(s),n=0;n<s;n++)t[r[n][3]]=n;for(var a=0,i=0;i<s;i++){var o=t[i];e[a++]=r[o][0],e[a++]=r[o][1],e[a++]=r[o][2]}return e},O=function(){var e,t,n,a,i,o,l,d;for(l=0,d=0,e=0;e<s;e++){for(n=e,a=(i=r[e])[1],t=e+1;t<s;t++)(o=r[t])[1]<a&&(n=t,a=o[1]);if(o=r[n],e!=n&&(t=o[0],o[0]=i[0],i[0]=t,t=o[1],o[1]=i[1],i[1]=t,t=o[2],o[2]=i[2],i[2]=t,t=o[3],o[3]=i[3],i[3]=t),a!=l){for(C[l]=d+e>>1,t=l+1;t<a;t++)C[t]=e;l=a,d=e}}for(C[l]=d+u>>1,t=l+1;t<256;t++)C[t]=u},M=function(){var r,i,s,u,m,g,p,v,w,b,y,B,x,S;for(n<f&&(a=1),e=30+(a-1)/3,B=t,x=0,S=n,b=(y=n/(3*a))/_|0,v=z,(p=(g=I)>>k)<=1&&(p=0),r=0;r<p;r++)D[r]=v*((p*p-r*r)*L/(p*p));for(w=n<f?3:n%o!=0?3*o:n%l!=0?3*l:n%d!=0?3*d:3*c,r=0;r<y;)if(s=(255&B[x+0])<<h,u=(255&B[x+1])<<h,m=(255&B[x+2])<<h,i=$(s,u,m),q(v,i,s,u,m),0!==p&&P(p,i,s,u,m),(x+=w)>=S&&(x-=n),0===b&&(b=1),++r%b==0)for(v-=v/e,(p=(g-=g/E)>>k)<=1&&(p=0),i=0;i<p;i++)D[i]=v*((p*p-i*i)*L/(p*p))},F=(i.map=function(e,t,n){var a,i,o,l,d,c,f;for(d=1e3,f=-1,i=(a=C[t])-1;a<s||i>=0;)a<s&&((o=(c=r[a])[1]-t)>=d?a=s:(a++,o<0&&(o=-o),(l=c[0]-e)<0&&(l=-l),(o+=l)<d&&((l=c[2]-n)<0&&(l=-l),(o+=l)<d&&(d=o,f=c[3])))),i>=0&&((o=t-(c=r[i])[1])>=d?i=-1:(i--,o<0&&(o=-o),(l=c[0]-e)<0&&(l=-l),(o+=l)<d&&((l=c[2]-n)<0&&(l=-l),(o+=l)<d&&(d=o,f=c[3]))));return f},i.process=function(){return M(),F(),O(),Z()},function(){var e;for(e=0;e<s;e++)r[e][0]>>=h,r[e][1]>>=h,r[e][2]>>=h,r[e][3]=e}),P=function(e,t,n,a,i){var o,l,d,c,f,u,h;for((d=t-e)<-1&&(d=-1),(c=t+e)>s&&(c=s),o=t+1,l=t-1,u=1;o<c||l>d;){if(f=D[u++],o<c){h=r[o++];try{h[0]-=f*(h[0]-n)/U,h[1]-=f*(h[1]-a)/U,h[2]-=f*(h[2]-i)/U}catch(e){}}if(l>d){h=r[l--];try{h[0]-=f*(h[0]-n)/U,h[1]-=f*(h[1]-a)/U,h[2]-=f*(h[2]-i)/U}catch(e){}}}},q=function(e,t,n,a,i){var s=r[t];s[0]-=e*(s[0]-n)/z,s[1]-=e*(s[1]-a)/z,s[2]-=e*(s[2]-i)/z},$=function(e,t,n){var a,i,o,l,d,c,f,u,_,g;for(_=u=~(1<<31),f=c=-1,a=0;a<s;a++)(i=(g=r[a])[0]-e)<0&&(i=-i),(o=g[1]-t)<0&&(o=-o),i+=o,(o=g[2]-n)<0&&(o=-o),(i+=o)<u&&(u=i,c=a),(l=i-(R[a]>>m-h))<_&&(_=l,f=a),d=T[a]>>v,T[a]-=d,R[a]+=d<<p;return T[c]+=w,R[c]-=b,f};return N.apply(this,arguments),i}},function(e,t,n){(function(t){var a;a={},e.exports=a,function(e,t){e.toRGBA8=function(t){var n=t.width,a=t.height;if(null==t.tabs.acTL)return[e.toRGBA8.decodeImage(t.data,n,a,t).buffer];var r=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var i,s=new Uint8Array(n*a*4),o=0;o<t.frames.length;o++){var l=t.frames[o],d=l.rect.x,c=l.rect.y,f=l.rect.width,u=l.rect.height,h=e.toRGBA8.decodeImage(l.data,f,u,t);if(0==o?i=h:0==l.blend?e._copyTile(h,f,u,i,n,a,d,c,0):1==l.blend&&e._copyTile(h,f,u,i,n,a,d,c,1),r.push(i.buffer),i=i.slice(0),0==l.dispose);else if(1==l.dispose)e._copyTile(s,f,u,i,n,a,d,c,0);else if(2==l.dispose){for(var _=o-1;2==t.frames[_].dispose;)_--;i=new Uint8Array(r[_]).slice(0)}}return r},e.toRGBA8.decodeImage=function(t,n,a,r){var i=n*a,s=e.decode._getBPP(r),o=Math.ceil(n*s/8),l=new Uint8Array(4*i),d=new Uint32Array(l.buffer),c=r.ctype,f=r.depth,u=e._bin.readUshort;if(6==c){var h=i<<2;if(8==f)for(var _=0;_<h;_++)l[_]=t[_];if(16==f)for(_=0;_<h;_++)l[_]=t[_<<1]}else if(2==c){var m=r.tabs.tRNS,g=-1,p=-1,v=-1;if(m&&(g=m[0],p=m[1],v=m[2]),8==f)for(_=0;_<i;_++){var w=3*_;l[x=_<<2]=t[w],l[x+1]=t[w+1],l[x+2]=t[w+2],l[x+3]=255,-1!=g&&t[w]==g&&t[w+1]==p&&t[w+2]==v&&(l[x+3]=0)}if(16==f)for(_=0;_<i;_++)w=6*_,l[x=_<<2]=t[w],l[x+1]=t[w+2],l[x+2]=t[w+4],l[x+3]=255,-1!=g&&u(t,w)==g&&u(t,w+2)==p&&u(t,w+4)==v&&(l[x+3]=0)}else if(3==c){var b=r.tabs.PLTE,y=r.tabs.tRNS,k=y?y.length:0;if(1==f)for(var B=0;B<a;B++){var I=B*o,E=B*n;for(_=0;_<n;_++){var x=E+_<<2,z=3*(S=t[I+(_>>3)]>>7-((7&_)<<0)&1);l[x]=b[z],l[x+1]=b[z+1],l[x+2]=b[z+2],l[x+3]=S<k?y[S]:255}}if(2==f)for(B=0;B<a;B++)for(I=B*o,E=B*n,_=0;_<n;_++)x=E+_<<2,z=3*(S=t[I+(_>>2)]>>6-((3&_)<<1)&3),l[x]=b[z],l[x+1]=b[z+1],l[x+2]=b[z+2],l[x+3]=S<k?y[S]:255;if(4==f)for(B=0;B<a;B++)for(I=B*o,E=B*n,_=0;_<n;_++)x=E+_<<2,z=3*(S=t[I+(_>>1)]>>4-((1&_)<<2)&15),l[x]=b[z],l[x+1]=b[z+1],l[x+2]=b[z+2],l[x+3]=S<k?y[S]:255;if(8==f)for(_=0;_<i;_++){var S;x=_<<2,z=3*(S=t[_]),l[x]=b[z],l[x+1]=b[z+1],l[x+2]=b[z+2],l[x+3]=S<k?y[S]:255}}else if(4==c){if(8==f)for(_=0;_<i;_++){x=_<<2;var L=t[A=_<<1];l[x]=L,l[x+1]=L,l[x+2]=L,l[x+3]=t[A+1]}if(16==f)for(_=0;_<i;_++){var A;x=_<<2,L=t[A=_<<2],l[x]=L,l[x+1]=L,l[x+2]=L,l[x+3]=t[A+2]}}else if(0==c){if(g=r.tabs.tRNS?r.tabs.tRNS:-1,1==f)for(_=0;_<i;_++){var U=(L=255*(t[_>>3]>>7-(7&_)&1))==255*g?0:255;d[_]=U<<24|L<<16|L<<8|L}if(2==f)for(_=0;_<i;_++)U=(L=85*(t[_>>2]>>6-((3&_)<<1)&3))==85*g?0:255,d[_]=U<<24|L<<16|L<<8|L;if(4==f)for(_=0;_<i;_++)U=(L=17*(t[_>>1]>>4-((1&_)<<2)&15))==17*g?0:255,d[_]=U<<24|L<<16|L<<8|L;if(8==f)for(_=0;_<i;_++)U=(L=t[_])==g?0:255,d[_]=U<<24|L<<16|L<<8|L;if(16==f)for(_=0;_<i;_++)L=t[_<<1],U=u(t,_<<1)==g?0:255,d[_]=U<<24|L<<16|L<<8|L}return l},e.decode=function(t){for(var n,a=new Uint8Array(t),r=8,i=e._bin,s=i.readUshort,o=i.readUint,l={tabs:{},frames:[]},d=new Uint8Array(a.length),c=0,f=0,u=[137,80,78,71,13,10,26,10],h=0;h<8;h++)if(a[h]!=u[h])throw"The input is not a PNG file!";for(;r<a.length;){var _=i.readUint(a,r);r+=4;var m=i.readASCII(a,r,4);if(r+=4,"IHDR"==m)e.decode._IHDR(a,r,l);else if("IDAT"==m){for(h=0;h<_;h++)d[c+h]=a[r+h];c+=_}else if("acTL"==m)l.tabs[m]={num_frames:o(a,r),num_plays:o(a,r+4)},n=new Uint8Array(a.length);else if("fcTL"==m){0!=f&&((I=l.frames[l.frames.length-1]).data=e.decode._decompress(l,n.slice(0,f),I.rect.width,I.rect.height),f=0);var g={x:o(a,r+12),y:o(a,r+16),width:o(a,r+4),height:o(a,r+8)},p=s(a,r+22);p=s(a,r+20)/(0==p?100:p);var v={rect:g,delay:Math.round(1e3*p),dispose:a[r+24],blend:a[r+25]};l.frames.push(v)}else if("fdAT"==m){for(h=0;h<_-4;h++)n[f+h]=a[r+h+4];f+=_-4}else if("pHYs"==m)l.tabs[m]=[i.readUint(a,r),i.readUint(a,r+4),a[r+8]];else if("cHRM"==m)for(l.tabs[m]=[],h=0;h<8;h++)l.tabs[m].push(i.readUint(a,r+4*h));else if("tEXt"==m){null==l.tabs[m]&&(l.tabs[m]={});var w=i.nextZero(a,r),b=i.readASCII(a,r,w-r),y=i.readASCII(a,w+1,r+_-w-1);l.tabs[m][b]=y}else if("iTXt"==m){null==l.tabs[m]&&(l.tabs[m]={}),w=0;var k=r;w=i.nextZero(a,k),b=i.readASCII(a,k,w-k),a[k=w+1],a[k+1],k+=2,w=i.nextZero(a,k),i.readASCII(a,k,w-k),k=w+1,w=i.nextZero(a,k),i.readUTF8(a,k,w-k),k=w+1,y=i.readUTF8(a,k,_-(k-r)),l.tabs[m][b]=y}else if("PLTE"==m)l.tabs[m]=i.readBytes(a,r,_);else if("hIST"==m){var B=l.tabs.PLTE.length/3;for(l.tabs[m]=[],h=0;h<B;h++)l.tabs[m].push(s(a,r+2*h))}else if("tRNS"==m)3==l.ctype?l.tabs[m]=i.readBytes(a,r,_):0==l.ctype?l.tabs[m]=s(a,r):2==l.ctype&&(l.tabs[m]=[s(a,r),s(a,r+2),s(a,r+4)]);else if("gAMA"==m)l.tabs[m]=i.readUint(a,r)/1e5;else if("sRGB"==m)l.tabs[m]=a[r];else if("bKGD"==m)0==l.ctype||4==l.ctype?l.tabs[m]=[s(a,r)]:2==l.ctype||6==l.ctype?l.tabs[m]=[s(a,r),s(a,r+2),s(a,r+4)]:3==l.ctype&&(l.tabs[m]=a[r]);else if("IEND"==m){var I;0!=f&&((I=l.frames[l.frames.length-1]).data=e.decode._decompress(l,n.slice(0,f),I.rect.width,I.rect.height),f=0),l.data=e.decode._decompress(l,d,l.width,l.height);break}r+=_,i.readUint(a,r),r+=4}return delete l.compress,delete l.interlace,delete l.filter,l},e.decode._decompress=function(t,n,a,r){return 0==t.compress&&(n=e.decode._inflate(n)),0==t.interlace?n=e.decode._filterZero(n,t,0,a,r):1==t.interlace&&(n=e.decode._readInterlace(n,t)),n},e.decode._inflate=function(e){return t.inflate(e)},e.decode._readInterlace=function(t,n){for(var a=n.width,r=n.height,i=e.decode._getBPP(n),s=i>>3,o=Math.ceil(a*i/8),l=new Uint8Array(r*o),d=0,c=[0,0,4,0,2,0,1],f=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],_=0;_<7;){for(var m=u[_],g=h[_],p=0,v=0,w=c[_];w<r;)w+=m,v++;for(var b=f[_];b<a;)b+=g,p++;var y=Math.ceil(p*i/8);e.decode._filterZero(t,n,d,p,v);for(var k=0,B=c[_];B<r;){for(var I=f[_],E=d+k*y<<3;I<a;){var x;if(1==i&&(x=(x=t[E>>3])>>7-(7&E)&1,l[B*o+(I>>3)]|=x<<7-((3&I)<<0)),2==i&&(x=(x=t[E>>3])>>6-(7&E)&3,l[B*o+(I>>2)]|=x<<6-((3&I)<<1)),4==i&&(x=(x=t[E>>3])>>4-(7&E)&15,l[B*o+(I>>1)]|=x<<4-((1&I)<<2)),i>=8)for(var z=B*o+I*s,S=0;S<s;S++)l[z+S]=t[(E>>3)+S];E+=i,I+=g}k++,B+=m}p*v!=0&&(d+=v*(1+y)),_+=1}return l},e.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},e.decode._filterZero=function(t,n,a,r,i){var s=e.decode._getBPP(n),o=Math.ceil(r*s/8),l=e.decode._paeth;s=Math.ceil(s/8);for(var d=0;d<i;d++){var c=a+d*o,f=c+d+1,u=t[f-1];if(0==u)for(var h=0;h<o;h++)t[c+h]=t[f+h];else if(1==u){for(h=0;h<s;h++)t[c+h]=t[f+h];for(h=s;h<o;h++)t[c+h]=t[f+h]+t[c+h-s]&255}else if(0==d){for(h=0;h<s;h++)t[c+h]=t[f+h];if(2==u)for(h=s;h<o;h++)t[c+h]=255&t[f+h];if(3==u)for(h=s;h<o;h++)t[c+h]=t[f+h]+(t[c+h-s]>>1)&255;if(4==u)for(h=s;h<o;h++)t[c+h]=t[f+h]+l(t[c+h-s],0,0)&255}else{if(2==u)for(h=0;h<o;h++)t[c+h]=t[f+h]+t[c+h-o]&255;if(3==u){for(h=0;h<s;h++)t[c+h]=t[f+h]+(t[c+h-o]>>1)&255;for(h=s;h<o;h++)t[c+h]=t[f+h]+(t[c+h-o]+t[c+h-s]>>1)&255}if(4==u){for(h=0;h<s;h++)t[c+h]=t[f+h]+l(0,t[c+h-o],0)&255;for(h=s;h<o;h++)t[c+h]=t[f+h]+l(t[c+h-s],t[c+h-o],t[c+h-s-o])&255}}}return t},e.decode._paeth=function(e,t,n){var a=e+t-n,r=Math.abs(a-e),i=Math.abs(a-t),s=Math.abs(a-n);return r<=i&&r<=s?e:i<=s?t:n},e.decode._IHDR=function(t,n,a){var r=e._bin;a.width=r.readUint(t,n),n+=4,a.height=r.readUint(t,n),n+=4,a.depth=t[n],n++,a.ctype=t[n],n++,a.compress=t[n],n++,a.filter=t[n],n++,a.interlace=t[n],n++},e._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII:function(e,t,n){for(var a="",r=0;r<n;r++)a+=String.fromCharCode(e[t+r]);return a},writeASCII:function(e,t,n){for(var a=0;a<n.length;a++)e[t+a]=n.charCodeAt(a)},readBytes:function(e,t,n){for(var a=[],r=0;r<n;r++)a.push(e[t+r]);return a},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(t,n,a){for(var r,i="",s=0;s<a;s++)i+="%"+e._bin.pad(t[n+s].toString(16));try{r=decodeURIComponent(i)}catch(r){return e._bin.readASCII(t,n,a)}return r}},e._copyTile=function(e,t,n,a,r,i,s,o,l){for(var d=Math.min(t,r),c=Math.min(n,i),f=0,u=0,h=0;h<c;h++)for(var _=0;_<d;_++)if(s>=0&&o>=0?(f=h*t+_<<2,u=(o+h)*r+s+_<<2):(f=(-o+h)*t-s+_<<2,u=h*r+_<<2),0==l)a[u]=e[f],a[u+1]=e[f+1],a[u+2]=e[f+2],a[u+3]=e[f+3];else if(1==l){var m=e[f+3]*(1/255),g=e[f]*m,p=e[f+1]*m,v=e[f+2]*m,w=a[u+3]*(1/255),b=a[u]*w,y=a[u+1]*w,k=a[u+2]*w,B=1-m,I=m+w*B,E=0==I?0:1/I;a[u+3]=255*I,a[u+0]=(g+b*B)*E,a[u+1]=(p+y*B)*E,a[u+2]=(v+k*B)*E}else if(2==l)m=e[f+3],g=e[f],p=e[f+1],v=e[f+2],w=a[u+3],b=a[u],y=a[u+1],k=a[u+2],m==w&&g==b&&p==y&&v==k?(a[u]=0,a[u+1]=0,a[u+2]=0,a[u+3]=0):(a[u]=g,a[u+1]=p,a[u+2]=v,a[u+3]=m);else if(3==l){if(m=e[f+3],g=e[f],p=e[f+1],v=e[f+2],w=a[u+3],b=a[u],y=a[u+1],k=a[u+2],m==w&&g==b&&p==y&&v==k)continue;if(m<220&&w>20)return!1}return!0},e.encode=function(t,n,a,r,i,s){null==r&&(r=0),null==s&&(s=!1);for(var o=new Uint8Array(t[0].byteLength*t.length+100),l=[137,80,78,71,13,10,26,10],d=0;d<8;d++)o[d]=l[d];var c=8,f=e._bin,u=e.crc.crc,h=f.writeUint,_=f.writeUshort,m=f.writeASCII,g=e.encode.compressPNG(t,n,a,r,s);h(o,c,13),m(o,c+=4,"IHDR"),h(o,c+=4,n),h(o,c+=4,a),o[c+=4]=g.depth,o[++c]=g.ctype,o[++c]=0,o[++c]=0,o[++c]=0,h(o,++c,u(o,c-17,17)),h(o,c+=4,1),m(o,c+=4,"sRGB"),o[c+=4]=1,h(o,++c,u(o,c-5,5)),c+=4;var p=t.length>1;if(p&&(h(o,c,8),m(o,c+=4,"acTL"),h(o,c+=4,t.length),h(o,c+=4,0),h(o,c+=4,u(o,c-12,12)),c+=4),3==g.ctype){for(h(o,c,3*(x=g.plte.length)),m(o,c+=4,"PLTE"),c+=4,d=0;d<x;d++){var v=3*d,w=g.plte[d],b=255&w,y=w>>8&255,k=w>>16&255;o[c+v+0]=b,o[c+v+1]=y,o[c+v+2]=k}if(h(o,c+=3*x,u(o,c-3*x-4,3*x+4)),c+=4,g.gotAlpha){for(h(o,c,x),m(o,c+=4,"tRNS"),c+=4,d=0;d<x;d++)o[c+d]=g.plte[d]>>24&255;h(o,c+=x,u(o,c-x-4,x+4)),c+=4}}for(var B=0,I=0;I<g.frames.length;I++){var E=g.frames[I];p&&(h(o,c,26),m(o,c+=4,"fcTL"),h(o,c+=4,B++),h(o,c+=4,E.rect.width),h(o,c+=4,E.rect.height),h(o,c+=4,E.rect.x),h(o,c+=4,E.rect.y),_(o,c+=4,i[I]),_(o,c+=2,1e3),o[c+=2]=E.dispose,o[++c]=E.blend,h(o,++c,u(o,c-30,30)),c+=4);var x,z=E.cimg;h(o,c,(x=z.length)+(0==I?0:4));var S=c+=4;for(m(o,c,0==I?"IDAT":"fdAT"),c+=4,0!=I&&(h(o,c,B++),c+=4),d=0;d<x;d++)o[c+d]=z[d];h(o,c+=x,u(o,S,c-S)),c+=4}return h(o,c,0),m(o,c+=4,"IEND"),h(o,c+=4,u(o,c-4,4)),c+=4,o.buffer.slice(0,c)},e.encode.compressPNG=function(t,n,a,r,i){for(var s=e.encode.compress(t,n,a,r,!1,i),o=0;o<t.length;o++){var l=s.frames[o],d=(l.rect.width,l.rect.height),c=l.bpl,f=l.bpp,u=new Uint8Array(d*c+d);l.cimg=e.encode._filterZero(l.img,d,f,c,u)}return s},e.encode.compress=function(t,n,a,r,i,s){null==s&&(s=!1);for(var o=6,l=8,d=4,c=255,f=0;f<t.length;f++)for(var u=new Uint8Array(t[f]),h=u.length,_=0;_<h;_+=4)c&=u[_+3];var m=255!=c,g={},p=[];if(0!=t.length&&(g[0]=0,p.push(0),0!=r&&r--),0!=r){var v=e.quantize(t,r,i);for(t=v.bufs,_=0;_<v.plte.length;_++)null==g[b=v.plte[_].est.rgba]&&(g[b]=p.length,p.push(b))}else for(f=0;f<t.length;f++){var w=new Uint32Array(t[f]);for(h=w.length,_=0;_<h;_++){var b=w[_];if((_<n||b!=w[_-1]&&b!=w[_-n])&&null==g[b]&&(g[b]=p.length,p.push(b),p.length>=300))break}}var y=!!m&&i,k=p.length;k<=256&&0==s&&(l=k<=2?1:k<=4?2:k<=16?4:8,i&&(l=8),m=!0);var B=[];for(f=0;f<t.length;f++){var I=new Uint8Array(t[f]),E=new Uint32Array(I.buffer),x=0,z=0,S=n,L=a,A=0;if(0!=f&&!y){for(var U=i||1==f||2==B[B.length-2].dispose?1:2,C=0,R=1e9,T=0;T<U;T++){for(var D=new Uint8Array(t[f-1-T]),N=new Uint32Array(t[f-1-T]),Z=n,O=a,M=-1,F=-1,P=0;P<a;P++)for(var q=0;q<n;q++)E[_=P*n+q]!=N[_]&&(q<Z&&(Z=q),q>M&&(M=q),P<O&&(O=P),P>F&&(F=P));var $=-1==M?1:(M-Z+1)*(F-O+1);$<R&&(R=$,C=T,-1==M?(x=z=0,S=L=1):(x=Z,z=O,S=M-Z+1,L=F-O+1))}D=new Uint8Array(t[f-1-C]),1==C&&(B[B.length-1].dispose=2);var j=new Uint8Array(S*L*4);new Uint32Array(j.buffer),e._copyTile(D,n,a,j,S,L,-x,-z,0),e._copyTile(I,n,a,j,S,L,-x,-z,3)?(e._copyTile(I,n,a,j,S,L,-x,-z,2),A=1):(e._copyTile(I,n,a,j,S,L,-x,-z,0),A=0),I=j,E=new Uint32Array(I.buffer)}var H=4*S;if(k<=256&&0==s){for(H=Math.ceil(l*S/8),j=new Uint8Array(H*L),P=0;P<L;P++){_=P*H;var K=P*S;if(8==l)for(q=0;q<S;q++)j[_+q]=g[E[K+q]];else if(4==l)for(q=0;q<S;q++)j[_+(q>>1)]|=g[E[K+q]]<<4-4*(1&q);else if(2==l)for(q=0;q<S;q++)j[_+(q>>2)]|=g[E[K+q]]<<6-2*(3&q);else if(1==l)for(q=0;q<S;q++)j[_+(q>>3)]|=g[E[K+q]]<<7-1*(7&q)}I=j,o=3,d=1}else if(0==m&&1==t.length){j=new Uint8Array(S*L*3);var G=S*L;for(_=0;_<G;_++){var Y=3*_,X=4*_;j[Y]=I[X],j[Y+1]=I[X+1],j[Y+2]=I[X+2]}I=j,o=2,d=3,H=3*S}B.push({rect:{x:x,y:z,width:S,height:L},img:I,bpl:H,bpp:d,blend:A,dispose:y?1:0})}return{ctype:o,depth:l,plte:p,gotAlpha:m,frames:B}},e.encode._filterZero=function(n,a,r,i,s){for(var o=[],l=0;l<5;l++)if(!(a*i>5e5)||2!=l&&3!=l&&4!=l){for(var d=0;d<a;d++)e.encode._filterLine(s,n,d,i,r,l);if(o.push(t.deflate(s)),1==r)break}for(var c,f=1e9,u=0;u<o.length;u++)o[u].length<f&&(c=u,f=o[u].length);return o[c]},e.encode._filterLine=function(t,n,a,r,i,s){var o=a*r,l=o+a,d=e.decode._paeth;if(t[l]=s,l++,0==s)for(var c=0;c<r;c++)t[l+c]=n[o+c];else if(1==s){for(c=0;c<i;c++)t[l+c]=n[o+c];for(c=i;c<r;c++)t[l+c]=n[o+c]-n[o+c-i]+256&255}else if(0==a){for(c=0;c<i;c++)t[l+c]=n[o+c];if(2==s)for(c=i;c<r;c++)t[l+c]=n[o+c];if(3==s)for(c=i;c<r;c++)t[l+c]=n[o+c]-(n[o+c-i]>>1)+256&255;if(4==s)for(c=i;c<r;c++)t[l+c]=n[o+c]-d(n[o+c-i],0,0)+256&255}else{if(2==s)for(c=0;c<r;c++)t[l+c]=n[o+c]+256-n[o+c-r]&255;if(3==s){for(c=0;c<i;c++)t[l+c]=n[o+c]+256-(n[o+c-r]>>1)&255;for(c=i;c<r;c++)t[l+c]=n[o+c]+256-(n[o+c-r]+n[o+c-i]>>1)&255}if(4==s){for(c=0;c<i;c++)t[l+c]=n[o+c]+256-d(0,n[o+c-r],0)&255;for(c=i;c<r;c++)t[l+c]=n[o+c]+256-d(n[o+c-i],n[o+c-r],n[o+c-i-r])&255}}},e.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,a=0;a<8;a++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(t,n,a,r){for(var i=0;i<r;i++)t=e.crc.table[255&(t^n[a+i])]^t>>>8;return t},crc:function(t,n,a){return 4294967295^e.crc.update(4294967295,t,n,a)}},e.quantize=function(t,n,a){for(var r=[],i=0,s=0;s<t.length;s++)r.push(e.encode.alphaMul(new Uint8Array(t[s]),a)),i+=t[s].byteLength;var o=new Uint8Array(i),l=new Uint32Array(o.buffer),d=0;for(s=0;s<r.length;s++){for(var c=r[s],f=c.length,u=0;u<f;u++)o[d+u]=c[u];d+=f}var h={i0:0,i1:o.length,bst:null,est:null,tdst:0,left:null,right:null};h.bst=e.quantize.stats(o,h.i0,h.i1),h.est=e.quantize.estats(h.bst);for(var _=[h];_.length<n;){var m=0,g=0;for(s=0;s<_.length;s++)_[s].est.L>m&&(m=_[s].est.L,g=s);if(m<.001)break;var p=_[g],v=e.quantize.splitPixels(o,l,p.i0,p.i1,p.est.e,p.est.eMq255),w={i0:p.i0,i1:v,bst:null,est:null,tdst:0,left:null,right:null};w.bst=e.quantize.stats(o,w.i0,w.i1),w.est=e.quantize.estats(w.bst);var b={i0:v,i1:p.i1,bst:null,est:null,tdst:0,left:null,right:null};for(b.bst={R:[],m:[],N:p.bst.N-w.bst.N},s=0;s<16;s++)b.bst.R[s]=p.bst.R[s]-w.bst.R[s];for(s=0;s<4;s++)b.bst.m[s]=p.bst.m[s]-w.bst.m[s];b.est=e.quantize.estats(b.bst),p.left=w,p.right=b,_[g]=w,_.push(b)}_.sort((function(e,t){return t.bst.N-e.bst.N}));for(var y=0;y<r.length;y++){var k=e.quantize.planeDst,B=new Uint8Array(r[y].buffer),I=new Uint32Array(r[y].buffer),E=B.length;for(s=0;s<E;s+=4){for(var x=B[s]*(1/255),z=B[s+1]*(1/255),S=B[s+2]*(1/255),L=B[s+3]*(1/255),A=h;A.left;)A=k(A.est,x,z,S,L)<=0?A.left:A.right;I[s>>2]=A.est.rgba}r[y]=I.buffer}return{bufs:r,plte:_}},e.quantize.getNearest=function(t,n,a,r,i){if(null==t.left)return t.tdst=e.quantize.dist(t.est.q,n,a,r,i),t;var s=e.quantize.planeDst(t.est,n,a,r,i),o=t.left,l=t.right;s>0&&(o=t.right,l=t.left);var d=e.quantize.getNearest(o,n,a,r,i);if(d.tdst<=s*s)return d;var c=e.quantize.getNearest(l,n,a,r,i);return c.tdst<d.tdst?c:d},e.quantize.planeDst=function(e,t,n,a,r){var i=e.e;return i[0]*t+i[1]*n+i[2]*a+i[3]*r-e.eMq},e.quantize.dist=function(e,t,n,a,r){var i=t-e[0],s=n-e[1],o=a-e[2],l=r-e[3];return i*i+s*s+o*o+l*l},e.quantize.splitPixels=function(t,n,a,r,i,s){var o=e.quantize.vecDot;for(r-=4;a<r;){for(;o(t,a,i)<=s;)a+=4;for(;o(t,r,i)>s;)r-=4;if(a>=r)break;var l=n[a>>2];n[a>>2]=n[r>>2],n[r>>2]=l,a+=4,r-=4}for(;o(t,a,i)>s;)a-=4;return a+4},e.quantize.vecDot=function(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]},e.quantize.stats=function(e,t,n){for(var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],i=n-t>>2,s=t;s<n;s+=4){var o=e[s]*(1/255),l=e[s+1]*(1/255),d=e[s+2]*(1/255),c=e[s+3]*(1/255);r[0]+=o,r[1]+=l,r[2]+=d,r[3]+=c,a[0]+=o*o,a[1]+=o*l,a[2]+=o*d,a[3]+=o*c,a[5]+=l*l,a[6]+=l*d,a[7]+=l*c,a[10]+=d*d,a[11]+=d*c,a[15]+=c*c}return a[4]=a[1],a[8]=a[2],a[12]=a[3],a[9]=a[6],a[13]=a[7],a[14]=a[11],{R:a,m:r,N:i}},e.quantize.estats=function(t){var n=t.R,a=t.m,r=t.N,i=a[0],s=a[1],o=a[2],l=a[3],d=0==r?0:1/r,c=[n[0]-i*i*d,n[1]-i*s*d,n[2]-i*o*d,n[3]-i*l*d,n[4]-s*i*d,n[5]-s*s*d,n[6]-s*o*d,n[7]-s*l*d,n[8]-o*i*d,n[9]-o*s*d,n[10]-o*o*d,n[11]-o*l*d,n[12]-l*i*d,n[13]-l*s*d,n[14]-l*o*d,n[15]-l*l*d],f=c,u=e.M4,h=[.5,.5,.5,.5],_=0,m=0;if(0!=r)for(var g=0;g<10&&(h=u.multVec(f,h),m=Math.sqrt(u.dot(h,h)),h=u.sml(1/m,h),!(Math.abs(m-_)<1e-9));g++)_=m;var p=[i*d,s*d,o*d,l*d],v=u.dot(u.sml(255,p),h),w=p[3]<.001?0:1/p[3];return{Cov:c,q:p,e:h,L:_,eMq255:v,eMq:u.dot(h,p),rgba:(Math.round(255*p[3])<<24|Math.round(255*p[2]*w)<<16|Math.round(255*p[1]*w)<<8|Math.round(255*p[0]*w)<<0)>>>0}},e.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},e.encode.alphaMul=function(e,t){for(var n=new Uint8Array(e.length),a=e.length>>2,r=0;r<a;r++){var i=r<<2,s=e[i+3];t&&(s=s<128?0:255);var o=s*(1/255);n[i+0]=e[i+0]*o,n[i+1]=e[i+1]*o,n[i+2]=e[i+2]*o,n[i+3]=s}return n}}(a,n(12))}).call(this,n(11))},function(e,t){var n,a,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var l,d=[],c=!1,f=-1;function u(){c&&l&&(c=!1,l.length?d=l.concat(d):f=-1,d.length&&h())}function h(){if(!c){var e=o(u);c=!0;for(var t=d.length;t;){for(l=d,d=[];++f<t;)l&&l[f].run();f=-1,t=d.length}l=null,c=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new _(e,t)),1!==d.length||c||o(h)},_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";var a={};(0,n(0).assign)(a,n(13),n(16),n(6)),e.exports=a},function(e,t,n){"use strict";var a=n(14),r=n(0),i=n(4),s=n(1),o=n(5),l=Object.prototype.toString,d=0,c=-1,f=0,u=8;function h(e){if(!(this instanceof h))return new h(e);this.options=r.assign({level:c,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==d)throw new Error(s[n]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var _;if(_="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=a.deflateSetDictionary(this.strm,_))!==d)throw new Error(s[n]);this._dict_set=!0}}function _(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(e,t){var n,s,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(c),o.next_out=0,o.avail_out=c),1!==(n=a.deflate(o,s))&&n!==d)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(i.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===s?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==s||(this.onEnd(d),o.avail_out=0,!0)},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=h,t.deflate=_,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,_(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,_(e,t)}},function(e,t,n){"use strict";var a,r=n(0),i=n(15),s=n(2),o=n(3),l=n(1),d=0,c=1,f=3,u=4,h=5,_=0,m=1,g=-2,p=-3,v=-5,w=-1,b=1,y=2,k=3,B=4,I=0,E=2,x=8,z=9,S=15,L=8,A=286,U=30,C=19,R=2*A+1,T=15,D=3,N=258,Z=N+D+1,O=32,M=42,F=69,P=73,q=91,$=103,j=113,H=666,K=1,G=2,Y=3,X=4,W=3;function Q(e,t){return e.msg=l[t],t}function V(e){return(e<<1)-(e>4?9:0)}function J(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ae(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function re(e,t){var n,a,r=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-Z?e.strstart-(e.w_size-Z):0,d=e.window,c=e.w_mask,f=e.prev,u=e.strstart+N,h=d[i+s-1],_=d[i+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(d[(n=t)+s]===_&&d[n+s-1]===h&&d[n]===d[i]&&d[++n]===d[i+1]){i+=2,n++;do{}while(d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&i<u);if(a=N-(u-i),i=u-N,a>s){if(e.match_start=t,s=a,a>=o)break;h=d[i+s-1],_=d[i+s]}}}while((t=f[t&c])>l&&0!=--r);return s<=e.lookahead?s:e.lookahead}function ie(e){var t,n,a,i,l,d,c,f,u,h,_=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=_+(_-Z)){r.arraySet(e.window,e.window,_,_,0),e.match_start-=_,e.strstart-=_,e.block_start-=_,t=n=e.hash_size;do{a=e.head[--t],e.head[t]=a>=_?a-_:0}while(--n);t=n=_;do{a=e.prev[--t],e.prev[t]=a>=_?a-_:0}while(--n);i+=_}if(0===e.strm.avail_in)break;if(d=e.strm,c=e.window,f=e.strstart+e.lookahead,u=i,h=void 0,(h=d.avail_in)>u&&(h=u),n=0===h?0:(d.avail_in-=h,r.arraySet(c,d.input,d.next_in,h,f),1===d.state.wrap?d.adler=s(d.adler,c,h,f):2===d.state.wrap&&(d.adler=o(d.adler,c,h,f)),d.next_in+=h,d.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=D)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+D-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<D)););}while(e.lookahead<Z&&0!==e.strm.avail_in)}function se(e,t){for(var n,a;;){if(e.lookahead<Z){if(ie(e),e.lookahead<Z&&t===d)return K;if(0===e.lookahead)break}if(n=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Z&&(e.match_length=re(e,n)),e.match_length>=D)if(a=i._tr_tally(e,e.strstart-e.match_start,e.match_length-D),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=D){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else a=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=e.strstart<D-1?e.strstart:D-1,t===u?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:G}function oe(e,t){for(var n,a,r;;){if(e.lookahead<Z){if(ie(e),e.lookahead<Z&&t===d)return K;if(0===e.lookahead)break}if(n=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=D-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Z&&(e.match_length=re(e,n),e.match_length<=5&&(e.strategy===b||e.match_length===D&&e.strstart-e.match_start>4096)&&(e.match_length=D-1)),e.prev_length>=D&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-D,a=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-D),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=D-1,e.strstart++,a&&(te(e,!1),0===e.strm.avail_out))return K}else if(e.match_available){if((a=i._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return K}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<D-1?e.strstart:D-1,t===u?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:G}function le(e,t,n,a,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=r}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*R),this.dyn_dtree=new r.Buf16(2*(2*U+1)),this.bl_tree=new r.Buf16(2*(2*C+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(T+1),this.heap=new r.Buf16(2*A+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*A+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=E,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?M:j,e.adler=2===t.wrap?0:1,t.last_flush=d,i._tr_init(t),_):Q(e,g)}function fe(e){var t,n=ce(e);return n===_&&((t=e.state).window_size=2*t.w_size,J(t.head),t.max_lazy_match=a[t.level].max_lazy,t.good_match=a[t.level].good_length,t.nice_match=a[t.level].nice_length,t.max_chain_length=a[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=D-1,t.match_available=0,t.ins_h=0),n}function ue(e,t,n,a,i,s){if(!e)return g;var o=1;if(t===w&&(t=6),a<0?(o=0,a=-a):a>15&&(o=2,a-=16),i<1||i>z||n!==x||a<8||a>15||t<0||t>9||s<0||s>B)return Q(e,g);8===a&&(a=9);var l=new de;return e.state=l,l.strm=e,l.wrap=o,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+D-1)/D),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,fe(e)}a=[new le(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ie(e),0===e.lookahead&&t===d)return K;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var a=e.block_start+n;if((0===e.strstart||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,te(e,!1),0===e.strm.avail_out))return K;if(e.strstart-e.block_start>=e.w_size-Z&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===u?(te(e,!0),0===e.strm.avail_out?Y:X):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),K)})),new le(4,4,8,4,se),new le(4,5,16,8,se),new le(4,6,32,32,se),new le(4,4,16,16,oe),new le(8,16,32,32,oe),new le(8,16,128,128,oe),new le(8,32,128,256,oe),new le(32,128,258,1024,oe),new le(32,258,258,4096,oe)],t.deflateInit=function(e,t){return ue(e,t,x,S,L,I)},t.deflateInit2=ue,t.deflateReset=fe,t.deflateResetKeep=ce,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,_):g},t.deflate=function(e,t){var n,r,s,l;if(!e||!e.state||t>h||t<0)return e?Q(e,g):g;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===H&&t!==u)return Q(e,0===e.avail_out?v:g);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===M)if(2===r.wrap)e.adler=0,ne(r,31),ne(r,139),ne(r,8),r.gzhead?(ne(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ne(r,255&r.gzhead.time),ne(r,r.gzhead.time>>8&255),ne(r,r.gzhead.time>>16&255),ne(r,r.gzhead.time>>24&255),ne(r,9===r.level?2:r.strategy>=y||r.level<2?4:0),ne(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ne(r,255&r.gzhead.extra.length),ne(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=o(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=F):(ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,9===r.level?2:r.strategy>=y||r.level<2?4:0),ne(r,W),r.status=j);else{var p=x+(r.w_bits-8<<4)<<8;p|=(r.strategy>=y||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=O),p+=31-p%31,r.status=j,ae(r,p),0!==r.strstart&&(ae(r,e.adler>>>16),ae(r,65535&e.adler)),e.adler=1}if(r.status===F)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),ee(e),s=r.pending,r.pending!==r.pending_buf_size));)ne(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=P)}else r.status=P;if(r.status===P)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),ee(e),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ne(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=q)}else r.status=q;if(r.status===q)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),ee(e),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ne(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=$)}else r.status=$;if(r.status===$&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ee(e),r.pending+2<=r.pending_buf_size&&(ne(r,255&e.adler),ne(r,e.adler>>8&255),e.adler=0,r.status=j)):r.status=j),0!==r.pending){if(ee(e),0===e.avail_out)return r.last_flush=-1,_}else if(0===e.avail_in&&V(t)<=V(n)&&t!==u)return Q(e,v);if(r.status===H&&0!==e.avail_in)return Q(e,v);if(0!==e.avail_in||0!==r.lookahead||t!==d&&r.status!==H){var w=r.strategy===y?function(e,t){for(var n;;){if(0===e.lookahead&&(ie(e),0===e.lookahead)){if(t===d)return K;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===u?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:G}(r,t):r.strategy===k?function(e,t){for(var n,a,r,s,o=e.window;;){if(e.lookahead<=N){if(ie(e),e.lookahead<=N&&t===d)return K;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=D&&e.strstart>0&&(a=o[r=e.strstart-1])===o[++r]&&a===o[++r]&&a===o[++r]){s=e.strstart+N;do{}while(a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&r<s);e.match_length=N-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=D?(n=i._tr_tally(e,1,e.match_length-D),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===u?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:G}(r,t):a[r.level].func(r,t);if(w!==Y&&w!==X||(r.status=H),w===K||w===Y)return 0===e.avail_out&&(r.last_flush=-1),_;if(w===G&&(t===c?i._tr_align(r):t!==h&&(i._tr_stored_block(r,0,0,!1),t===f&&(J(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ee(e),0===e.avail_out))return r.last_flush=-1,_}return t!==u?_:r.wrap<=0?m:(2===r.wrap?(ne(r,255&e.adler),ne(r,e.adler>>8&255),ne(r,e.adler>>16&255),ne(r,e.adler>>24&255),ne(r,255&e.total_in),ne(r,e.total_in>>8&255),ne(r,e.total_in>>16&255),ne(r,e.total_in>>24&255)):(ae(r,e.adler>>>16),ae(r,65535&e.adler)),ee(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?_:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==M&&t!==F&&t!==P&&t!==q&&t!==$&&t!==j&&t!==H?Q(e,g):(e.state=null,t===j?Q(e,p):_):g},t.deflateSetDictionary=function(e,t){var n,a,i,o,l,d,c,f,u=t.length;if(!e||!e.state)return g;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==M||n.lookahead)return g;for(1===o&&(e.adler=s(e.adler,t,u,0)),n.wrap=0,u>=n.w_size&&(0===o&&(J(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new r.Buf8(n.w_size),r.arraySet(f,t,u-n.w_size,n.w_size,0),t=f,u=n.w_size),l=e.avail_in,d=e.next_in,c=e.input,e.avail_in=u,e.next_in=0,e.input=t,ie(n);n.lookahead>=D;){a=n.strstart,i=n.lookahead-(D-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+D-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++}while(--i);n.strstart=a,n.lookahead=D-1,ie(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=D-1,n.match_available=0,e.next_in=d,e.input=c,e.avail_in=l,n.wrap=o,_},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var a=n(0),r=4,i=0,s=1,o=2;function l(e){for(var t=e.length;--t>=0;)e[t]=0}var d=0,c=1,f=2,u=29,h=256,_=h+1+u,m=30,g=19,p=2*_+1,v=15,w=16,b=7,y=256,k=16,B=17,I=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(_+2));l(L);var A=new Array(2*m);l(A);var U=new Array(512);l(U);var C=new Array(256);l(C);var R=new Array(u);l(R);var T,D,N,Z=new Array(m);function O(e,t,n,a,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}function M(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function F(e){return e<256?U[e]:U[256+(e>>>7)]}function P(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function q(e,t,n){e.bi_valid>w-n?(e.bi_buf|=t<<e.bi_valid&65535,P(e,e.bi_buf),e.bi_buf=t>>w-e.bi_valid,e.bi_valid+=n-w):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function $(e,t,n){q(e,n[2*t],n[2*t+1])}function j(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function H(e,t,n){var a,r,i=new Array(v+1),s=0;for(a=1;a<=v;a++)i[a]=s=s+n[a-1]<<1;for(r=0;r<=t;r++){var o=e[2*r+1];0!==o&&(e[2*r]=j(i[o]++,o))}}function K(e){var t;for(t=0;t<_;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<g;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){e.bi_valid>8?P(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,n,a){var r=2*t,i=2*n;return e[r]<e[i]||e[r]===e[i]&&a[t]<=a[n]}function X(e,t,n){for(var a=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Y(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Y(t,a,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=a}function W(e,t,n){var a,r,i,s,o=0;if(0!==e.last_lit)do{a=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],r=e.pending_buf[e.l_buf+o],o++,0===a?$(e,r,t):($(e,(i=C[r])+h+1,t),0!==(s=E[i])&&q(e,r-=R[i],s),$(e,i=F(--a),n),0!==(s=x[i])&&q(e,a-=Z[i],s))}while(o<e.last_lit);$(e,y,t)}function Q(e,t){var n,a,r,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=d=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(r=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[r]=0,e.opt_len--,o&&(e.static_len-=s[2*r+1]);for(t.max_code=d,n=e.heap_len>>1;n>=1;n--)X(e,i,n);r=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,i,1),a=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=a,i[2*r]=i[2*n]+i[2*a],e.depth[r]=(e.depth[n]>=e.depth[a]?e.depth[n]:e.depth[a])+1,i[2*n+1]=i[2*a+1]=r,e.heap[1]=r++,X(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,a,r,i,s,o,l=t.dyn_tree,d=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,_=t.stat_desc.max_length,m=0;for(i=0;i<=v;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)(i=l[2*l[2*(a=e.heap[n])+1]+1]+1)>_&&(i=_,m++),l[2*a+1]=i,a>d||(e.bl_count[i]++,s=0,a>=h&&(s=u[a-h]),o=l[2*a],e.opt_len+=o*(i+s),f&&(e.static_len+=o*(c[2*a+1]+s)));if(0!==m){do{for(i=_-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[_]--,m-=2}while(m>0);for(i=_;0!==i;i--)for(a=e.bl_count[i];0!==a;)(r=e.heap[--n])>d||(l[2*r+1]!==i&&(e.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),a--)}}(e,t),H(i,d,e.bl_count)}function V(e,t,n){var a,r,i=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)r=s,s=t[2*(a+1)+1],++o<l&&r===s||(o<d?e.bl_tree[2*r]+=o:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[2*k]++):o<=10?e.bl_tree[2*B]++:e.bl_tree[2*I]++,o=0,i=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4))}function J(e,t,n){var a,r,i=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),a=0;a<=n;a++)if(r=s,s=t[2*(a+1)+1],!(++o<l&&r===s)){if(o<d)do{$(e,r,e.bl_tree)}while(0!=--o);else 0!==r?(r!==i&&($(e,r,e.bl_tree),o--),$(e,k,e.bl_tree),q(e,o-3,2)):o<=10?($(e,B,e.bl_tree),q(e,o-3,3)):($(e,I,e.bl_tree),q(e,o-11,7));o=0,i=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4)}}l(Z);var ee=!1;function te(e,t,n,r){q(e,(d<<1)+(r?1:0),3),function(e,t,n,r){G(e),r&&(P(e,n),P(e,~n)),a.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(!function(){var e,t,n,a,r,i=new Array(v+1);for(n=0,a=0;a<u-1;a++)for(R[a]=n,e=0;e<1<<E[a];e++)C[n++]=a;for(C[n-1]=a,r=0,a=0;a<16;a++)for(Z[a]=r,e=0;e<1<<x[a];e++)U[r++]=a;for(r>>=7;a<m;a++)for(Z[a]=r<<7,e=0;e<1<<x[a]-7;e++)U[256+r++]=a;for(t=0;t<=v;t++)i[t]=0;for(e=0;e<=143;)L[2*e+1]=8,e++,i[8]++;for(;e<=255;)L[2*e+1]=9,e++,i[9]++;for(;e<=279;)L[2*e+1]=7,e++,i[7]++;for(;e<=287;)L[2*e+1]=8,e++,i[8]++;for(H(L,_+1,i),e=0;e<m;e++)A[2*e+1]=5,A[2*e]=j(e,5);T=new O(L,E,h+1,_,v),D=new O(A,x,0,m,v),N=new O(new Array(0),z,0,g,b)}(),ee=!0),e.l_desc=new M(e.dyn_ltree,T),e.d_desc=new M(e.dyn_dtree,D),e.bl_desc=new M(e.bl_tree,N),e.bi_buf=0,e.bi_valid=0,K(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,a){var l,d,u=0;e.level>0?(e.strm.data_type===o&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<h;t++)if(0!==e.dyn_ltree[2*t])return s;return i}(e)),Q(e,e.l_desc),Q(e,e.d_desc),u=function(e){var t;for(V(e,e.dyn_ltree,e.l_desc.max_code),V(e,e.dyn_dtree,e.d_desc.max_code),Q(e,e.bl_desc),t=g-1;t>=3&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),l=e.opt_len+3+7>>>3,(d=e.static_len+3+7>>>3)<=l&&(l=d)):l=d=n+5,n+4<=l&&-1!==t?te(e,t,n,a):e.strategy===r||d===l?(q(e,(c<<1)+(a?1:0),3),W(e,L,A)):(q(e,(f<<1)+(a?1:0),3),function(e,t,n,a){var r;for(q(e,t-257,5),q(e,n-1,5),q(e,a-4,4),r=0;r<a;r++)q(e,e.bl_tree[2*S[r]+1],3);J(e,e.dyn_ltree,t-1),J(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),W(e,e.dyn_ltree,e.dyn_dtree)),K(e),a&&G(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(C[n]+h+1)]++,e.dyn_dtree[2*F(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){q(e,c<<1,3),$(e,y,L),function(e){16===e.bi_valid?(P(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var a=n(17),r=n(0),i=n(4),s=n(6),o=n(1),l=n(5),d=n(20),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(o[n]);if(this.header=new d,a.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=a.inflateSetDictionary(this.strm,t.dictionary))!==s.Z_OK))throw new Error(o[n])}function u(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}f.prototype.push=function(e,t){var n,o,l,d,f,u=this.strm,h=this.options.chunkSize,_=this.options.dictionary,m=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?u.input=i.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new r.Buf8(h),u.next_out=0,u.avail_out=h),(n=a.inflate(u,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&_&&(n=a.inflateSetDictionary(this.strm,_)),n===s.Z_BUF_ERROR&&!0===m&&(n=s.Z_OK,m=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==s.Z_STREAM_END&&(0!==u.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(u.output,u.next_out),d=u.next_out-l,f=i.buf2string(u.output,l),u.next_out=d,u.avail_out=h-d,d&&r.arraySet(u.output,u.output,l,d,0),this.onData(f)):this.onData(r.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(m=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),u.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=u,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.ungzip=u},function(e,t,n){"use strict";var a=n(0),r=n(2),i=n(3),s=n(18),o=n(19),l=0,d=1,c=2,f=4,u=5,h=6,_=0,m=1,g=2,p=-2,v=-3,w=-4,b=-5,y=8,k=1,B=2,I=3,E=4,x=5,z=6,S=7,L=8,A=9,U=10,C=11,R=12,T=13,D=14,N=15,Z=16,O=17,M=18,F=19,P=20,q=21,$=22,j=23,H=24,K=25,G=26,Y=27,X=28,W=29,Q=30,V=31,J=32,ee=852,te=592,ne=15;function ae(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ie(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=k,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new a.Buf32(ee),t.distcode=t.distdyn=new a.Buf32(te),t.sane=1,t.back=-1,_):p}function se(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ie(e)):p}function oe(e,t){var n,a;return e&&e.state?(a=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?p:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,se(e))):p}function le(e,t){var n,a;return e?(a=new re,e.state=a,a.window=null,(n=oe(e,t))!==_&&(e.state=null),n):p}var de,ce,fe=!0;function ue(e){if(fe){var t;for(de=new a.Buf32(512),ce=new a.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(d,e.lens,0,288,de,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(c,e.lens,0,32,ce,0,e.work,{bits:5}),fe=!1}e.lencode=de,e.lenbits=9,e.distcode=ce,e.distbits=5}function he(e,t,n,r){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new a.Buf8(s.wsize)),r>=s.wsize?(a.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>r&&(i=r),a.arraySet(s.window,t,n-r,i,s.wnext),(r-=i)?(a.arraySet(s.window,t,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}t.inflateReset=se,t.inflateReset2=oe,t.inflateResetKeep=ie,t.inflateInit=function(e){return le(e,ne)},t.inflateInit2=le,t.inflate=function(e,t){var n,ee,te,ne,re,ie,se,oe,le,de,ce,fe,_e,me,ge,pe,ve,we,be,ye,ke,Be,Ie,Ee,xe=0,ze=new a.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return p;(n=e.state).mode===R&&(n.mode=T),re=e.next_out,te=e.output,se=e.avail_out,ne=e.next_in,ee=e.input,ie=e.avail_in,oe=n.hold,le=n.bits,de=ie,ce=se,Be=_;e:for(;;)switch(n.mode){case k:if(0===n.wrap){n.mode=T;break}for(;le<16;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(2&n.wrap&&35615===oe){n.check=0,ze[0]=255&oe,ze[1]=oe>>>8&255,n.check=i(n.check,ze,2,0),oe=0,le=0,n.mode=B;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&oe)<<8)+(oe>>8))%31){e.msg="incorrect header check",n.mode=Q;break}if((15&oe)!==y){e.msg="unknown compression method",n.mode=Q;break}if(le-=4,ke=8+(15&(oe>>>=4)),0===n.wbits)n.wbits=ke;else if(ke>n.wbits){e.msg="invalid window size",n.mode=Q;break}n.dmax=1<<ke,e.adler=n.check=1,n.mode=512&oe?U:R,oe=0,le=0;break;case B:for(;le<16;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(n.flags=oe,(255&n.flags)!==y){e.msg="unknown compression method",n.mode=Q;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Q;break}n.head&&(n.head.text=oe>>8&1),512&n.flags&&(ze[0]=255&oe,ze[1]=oe>>>8&255,n.check=i(n.check,ze,2,0)),oe=0,le=0,n.mode=I;case I:for(;le<32;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}n.head&&(n.head.time=oe),512&n.flags&&(ze[0]=255&oe,ze[1]=oe>>>8&255,ze[2]=oe>>>16&255,ze[3]=oe>>>24&255,n.check=i(n.check,ze,4,0)),oe=0,le=0,n.mode=E;case E:for(;le<16;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}n.head&&(n.head.xflags=255&oe,n.head.os=oe>>8),512&n.flags&&(ze[0]=255&oe,ze[1]=oe>>>8&255,n.check=i(n.check,ze,2,0)),oe=0,le=0,n.mode=x;case x:if(1024&n.flags){for(;le<16;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}n.length=oe,n.head&&(n.head.extra_len=oe),512&n.flags&&(ze[0]=255&oe,ze[1]=oe>>>8&255,n.check=i(n.check,ze,2,0)),oe=0,le=0}else n.head&&(n.head.extra=null);n.mode=z;case z:if(1024&n.flags&&((fe=n.length)>ie&&(fe=ie),fe&&(n.head&&(ke=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),a.arraySet(n.head.extra,ee,ne,fe,ke)),512&n.flags&&(n.check=i(n.check,ee,fe,ne)),ie-=fe,ne+=fe,n.length-=fe),n.length))break e;n.length=0,n.mode=S;case S:if(2048&n.flags){if(0===ie)break e;fe=0;do{ke=ee[ne+fe++],n.head&&ke&&n.length<65536&&(n.head.name+=String.fromCharCode(ke))}while(ke&&fe<ie);if(512&n.flags&&(n.check=i(n.check,ee,fe,ne)),ie-=fe,ne+=fe,ke)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=L;case L:if(4096&n.flags){if(0===ie)break e;fe=0;do{ke=ee[ne+fe++],n.head&&ke&&n.length<65536&&(n.head.comment+=String.fromCharCode(ke))}while(ke&&fe<ie);if(512&n.flags&&(n.check=i(n.check,ee,fe,ne)),ie-=fe,ne+=fe,ke)break e}else n.head&&(n.head.comment=null);n.mode=A;case A:if(512&n.flags){for(;le<16;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(oe!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Q;break}oe=0,le=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=R;break;case U:for(;le<32;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}e.adler=n.check=ae(oe),oe=0,le=0,n.mode=C;case C:if(0===n.havedict)return e.next_out=re,e.avail_out=se,e.next_in=ne,e.avail_in=ie,n.hold=oe,n.bits=le,g;e.adler=n.check=1,n.mode=R;case R:if(t===u||t===h)break e;case T:if(n.last){oe>>>=7&le,le-=7&le,n.mode=Y;break}for(;le<3;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}switch(n.last=1&oe,le-=1,3&(oe>>>=1)){case 0:n.mode=D;break;case 1:if(ue(n),n.mode=P,t===h){oe>>>=2,le-=2;break e}break;case 2:n.mode=O;break;case 3:e.msg="invalid block type",n.mode=Q}oe>>>=2,le-=2;break;case D:for(oe>>>=7&le,le-=7&le;le<32;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if((65535&oe)!=(oe>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Q;break}if(n.length=65535&oe,oe=0,le=0,n.mode=N,t===h)break e;case N:n.mode=Z;case Z:if(fe=n.length){if(fe>ie&&(fe=ie),fe>se&&(fe=se),0===fe)break e;a.arraySet(te,ee,ne,fe,re),ie-=fe,ne+=fe,se-=fe,re+=fe,n.length-=fe;break}n.mode=R;break;case O:for(;le<14;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(n.nlen=257+(31&oe),oe>>>=5,le-=5,n.ndist=1+(31&oe),oe>>>=5,le-=5,n.ncode=4+(15&oe),oe>>>=4,le-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Q;break}n.have=0,n.mode=M;case M:for(;n.have<n.ncode;){for(;le<3;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}n.lens[Se[n.have++]]=7&oe,oe>>>=3,le-=3}for(;n.have<19;)n.lens[Se[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ie={bits:n.lenbits},Be=o(l,n.lens,0,19,n.lencode,0,n.work,Ie),n.lenbits=Ie.bits,Be){e.msg="invalid code lengths set",n.mode=Q;break}n.have=0,n.mode=F;case F:for(;n.have<n.nlen+n.ndist;){for(;pe=(xe=n.lencode[oe&(1<<n.lenbits)-1])>>>16&255,ve=65535&xe,!((ge=xe>>>24)<=le);){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(ve<16)oe>>>=ge,le-=ge,n.lens[n.have++]=ve;else{if(16===ve){for(Ee=ge+2;le<Ee;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(oe>>>=ge,le-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=Q;break}ke=n.lens[n.have-1],fe=3+(3&oe),oe>>>=2,le-=2}else if(17===ve){for(Ee=ge+3;le<Ee;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}le-=ge,ke=0,fe=3+(7&(oe>>>=ge)),oe>>>=3,le-=3}else{for(Ee=ge+7;le<Ee;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}le-=ge,ke=0,fe=11+(127&(oe>>>=ge)),oe>>>=7,le-=7}if(n.have+fe>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Q;break}for(;fe--;)n.lens[n.have++]=ke}}if(n.mode===Q)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Q;break}if(n.lenbits=9,Ie={bits:n.lenbits},Be=o(d,n.lens,0,n.nlen,n.lencode,0,n.work,Ie),n.lenbits=Ie.bits,Be){e.msg="invalid literal/lengths set",n.mode=Q;break}if(n.distbits=6,n.distcode=n.distdyn,Ie={bits:n.distbits},Be=o(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ie),n.distbits=Ie.bits,Be){e.msg="invalid distances set",n.mode=Q;break}if(n.mode=P,t===h)break e;case P:n.mode=q;case q:if(ie>=6&&se>=258){e.next_out=re,e.avail_out=se,e.next_in=ne,e.avail_in=ie,n.hold=oe,n.bits=le,s(e,ce),re=e.next_out,te=e.output,se=e.avail_out,ne=e.next_in,ee=e.input,ie=e.avail_in,oe=n.hold,le=n.bits,n.mode===R&&(n.back=-1);break}for(n.back=0;pe=(xe=n.lencode[oe&(1<<n.lenbits)-1])>>>16&255,ve=65535&xe,!((ge=xe>>>24)<=le);){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(pe&&0==(240&pe)){for(we=ge,be=pe,ye=ve;pe=(xe=n.lencode[ye+((oe&(1<<we+be)-1)>>we)])>>>16&255,ve=65535&xe,!(we+(ge=xe>>>24)<=le);){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}oe>>>=we,le-=we,n.back+=we}if(oe>>>=ge,le-=ge,n.back+=ge,n.length=ve,0===pe){n.mode=G;break}if(32&pe){n.back=-1,n.mode=R;break}if(64&pe){e.msg="invalid literal/length code",n.mode=Q;break}n.extra=15&pe,n.mode=$;case $:if(n.extra){for(Ee=n.extra;le<Ee;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}n.length+=oe&(1<<n.extra)-1,oe>>>=n.extra,le-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=j;case j:for(;pe=(xe=n.distcode[oe&(1<<n.distbits)-1])>>>16&255,ve=65535&xe,!((ge=xe>>>24)<=le);){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(0==(240&pe)){for(we=ge,be=pe,ye=ve;pe=(xe=n.distcode[ye+((oe&(1<<we+be)-1)>>we)])>>>16&255,ve=65535&xe,!(we+(ge=xe>>>24)<=le);){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}oe>>>=we,le-=we,n.back+=we}if(oe>>>=ge,le-=ge,n.back+=ge,64&pe){e.msg="invalid distance code",n.mode=Q;break}n.offset=ve,n.extra=15&pe,n.mode=H;case H:if(n.extra){for(Ee=n.extra;le<Ee;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}n.offset+=oe&(1<<n.extra)-1,oe>>>=n.extra,le-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Q;break}n.mode=K;case K:if(0===se)break e;if(fe=ce-se,n.offset>fe){if((fe=n.offset-fe)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Q;break}fe>n.wnext?(fe-=n.wnext,_e=n.wsize-fe):_e=n.wnext-fe,fe>n.length&&(fe=n.length),me=n.window}else me=te,_e=re-n.offset,fe=n.length;fe>se&&(fe=se),se-=fe,n.length-=fe;do{te[re++]=me[_e++]}while(--fe);0===n.length&&(n.mode=q);break;case G:if(0===se)break e;te[re++]=n.length,se--,n.mode=q;break;case Y:if(n.wrap){for(;le<32;){if(0===ie)break e;ie--,oe|=ee[ne++]<<le,le+=8}if(ce-=se,e.total_out+=ce,n.total+=ce,ce&&(e.adler=n.check=n.flags?i(n.check,te,ce,re-ce):r(n.check,te,ce,re-ce)),ce=se,(n.flags?oe:ae(oe))!==n.check){e.msg="incorrect data check",n.mode=Q;break}oe=0,le=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;le<32;){if(0===ie)break e;ie--,oe+=ee[ne++]<<le,le+=8}if(oe!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Q;break}oe=0,le=0}n.mode=W;case W:Be=m;break e;case Q:Be=v;break e;case V:return w;case J:default:return p}return e.next_out=re,e.avail_out=se,e.next_in=ne,e.avail_in=ie,n.hold=oe,n.bits=le,(n.wsize||ce!==e.avail_out&&n.mode<Q&&(n.mode<Y||t!==f))&&he(e,e.output,e.next_out,ce-e.avail_out)?(n.mode=V,w):(de-=e.avail_in,ce-=e.avail_out,e.total_in+=de,e.total_out+=ce,n.total+=ce,n.wrap&&ce&&(e.adler=n.check=n.flags?i(n.check,te,ce,e.next_out-ce):r(n.check,te,ce,e.next_out-ce)),e.data_type=n.bits+(n.last?64:0)+(n.mode===R?128:0)+(n.mode===P||n.mode===N?256:0),(0===de&&0===ce||t===f)&&Be===_&&(Be=b),Be)},t.inflateEnd=function(e){if(!e||!e.state)return p;var t=e.state;return t.window&&(t.window=null),e.state=null,_},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?p:(n.head=t,t.done=!1,_):p},t.inflateSetDictionary=function(e,t){var n,a=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==C?p:n.mode===C&&r(1,t,a,0)!==n.check?v:he(e,t,a,a)?(n.mode=V,w):(n.havedict=1,_):p},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,a,r,i,s,o,l,d,c,f,u,h,_,m,g,p,v,w,b,y,k,B,I,E,x;n=e.state,a=e.next_in,E=e.input,r=a+(e.avail_in-5),i=e.next_out,x=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),l=n.dmax,d=n.wsize,c=n.whave,f=n.wnext,u=n.window,h=n.hold,_=n.bits,m=n.lencode,g=n.distcode,p=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{_<15&&(h+=E[a++]<<_,_+=8,h+=E[a++]<<_,_+=8),w=m[h&p];t:for(;;){if(h>>>=b=w>>>24,_-=b,0===(b=w>>>16&255))x[i++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=m[(65535&w)+(h&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}y=65535&w,(b&=15)&&(_<b&&(h+=E[a++]<<_,_+=8),y+=h&(1<<b)-1,h>>>=b,_-=b),_<15&&(h+=E[a++]<<_,_+=8,h+=E[a++]<<_,_+=8),w=g[h&v];n:for(;;){if(h>>>=b=w>>>24,_-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=g[(65535&w)+(h&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&w,_<(b&=15)&&(h+=E[a++]<<_,(_+=8)<b&&(h+=E[a++]<<_,_+=8)),(k+=h&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=b,_-=b,k>(b=i-s)){if((b=k-b)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(B=0,I=u,0===f){if(B+=d-b,b<y){y-=b;do{x[i++]=u[B++]}while(--b);B=i-k,I=x}}else if(f<b){if(B+=d+f-b,(b-=f)<y){y-=b;do{x[i++]=u[B++]}while(--b);if(B=0,f<y){y-=b=f;do{x[i++]=u[B++]}while(--b);B=i-k,I=x}}}else if(B+=f-b,b<y){y-=b;do{x[i++]=u[B++]}while(--b);B=i-k,I=x}for(;y>2;)x[i++]=I[B++],x[i++]=I[B++],x[i++]=I[B++],y-=3;y&&(x[i++]=I[B++],y>1&&(x[i++]=I[B++]))}else{B=i-k;do{x[i++]=x[B++],x[i++]=x[B++],x[i++]=x[B++],y-=3}while(y>2);y&&(x[i++]=x[B++],y>1&&(x[i++]=x[B++]))}break}}break}}while(a<r&&i<o);a-=y=_>>3,h&=(1<<(_-=y<<3))-1,e.next_in=a,e.next_out=i,e.avail_in=a<r?r-a+5:5-(a-r),e.avail_out=i<o?o-i+257:257-(i-o),n.hold=h,n.bits=_}},function(e,t,n){"use strict";var a=n(0),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,d,c,f,u){var h,_,m,g,p,v,w,b,y,k=u.bits,B=0,I=0,E=0,x=0,z=0,S=0,L=0,A=0,U=0,C=0,R=null,T=0,D=new a.Buf16(16),N=new a.Buf16(16),Z=null,O=0;for(B=0;B<=15;B++)D[B]=0;for(I=0;I<l;I++)D[t[n+I]]++;for(z=k,x=15;x>=1&&0===D[x];x--);if(z>x&&(z=x),0===x)return d[c++]=20971520,d[c++]=20971520,u.bits=1,0;for(E=1;E<x&&0===D[E];E++);for(z<E&&(z=E),A=1,B=1;B<=15;B++)if(A<<=1,(A-=D[B])<0)return-1;if(A>0&&(0===e||1!==x))return-1;for(N[1]=0,B=1;B<15;B++)N[B+1]=N[B]+D[B];for(I=0;I<l;I++)0!==t[n+I]&&(f[N[t[n+I]]++]=I);if(0===e?(R=Z=f,v=19):1===e?(R=r,T-=257,Z=i,O-=257,v=256):(R=s,Z=o,v=-1),C=0,I=0,B=E,p=c,S=z,L=0,m=-1,g=(U=1<<z)-1,1===e&&U>852||2===e&&U>592)return 1;for(;;){w=B-L,f[I]<v?(b=0,y=f[I]):f[I]>v?(b=Z[O+f[I]],y=R[T+f[I]]):(b=96,y=0),h=1<<B-L,E=_=1<<S;do{d[p+(C>>L)+(_-=h)]=w<<24|b<<16|y|0}while(0!==_);for(h=1<<B-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,I++,0==--D[B]){if(B===x)break;B=t[n+f[I]]}if(B>z&&(C&g)!==m){for(0===L&&(L=z),p+=E,A=1<<(S=B-L);S+L<x&&!((A-=D[S+L])<=0);)S++,A<<=1;if(U+=1<<S,1===e&&U>852||2===e&&U>592)return 1;d[m=C&g]=z<<24|S<<16|p-c|0}}return 0!==C&&(d[p+C]=B-L<<24|64<<16|0),u.bits=z,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){var a,r,i;r=[],void 0===(i="function"==typeof(a=function(){return function e(t,n,a){var r,i,s=window,o="application/octet-stream",l=a||o,d=t,c=!n&&!a&&d,f=document.createElement("a"),u=function(e){return String(e)},h=s.Blob||s.MozBlob||s.WebKitBlob||u,_=n||"download";if(h=h.call?h.bind(s):Blob,"true"===String(this)&&(l=(d=[d,l])[0],d=d[1]),c&&c.length<2048&&(_=c.split("/").pop().split("?")[0],f.href=c,-1!==f.href.indexOf(c))){var m=new XMLHttpRequest;return m.open("GET",c,!0),m.responseType="blob",m.onload=function(t){e(t.target.response,_,o)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(d)){if(!(d.length>2096103.424&&h!==u))return navigator.msSaveBlob?navigator.msSaveBlob(w(d),_):b(d);l=(d=w(d)).type||o}else if(/([\x80-\xff])/.test(d)){for(var g=0,p=new Uint8Array(d.length),v=p.length;g<v;++g)p[g]=d.charCodeAt(g);d=new h([p],{type:l})}function w(e){for(var t=e.split(/[:;,]/),n=t[1],a=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=a.length,i=0,s=new Uint8Array(r);i<r;++i)s[i]=a.charCodeAt(i);return new h([s],{type:n})}function b(e,t){if("download"in f)return f.href=e,f.setAttribute("download",_),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout((function(){s.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=d instanceof h?d:new h([d],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,_);if(s.URL)b(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===u)try{return b("data:"+l+";base64,"+s.btoa(r))}catch(e){return b("data:"+l+","+encodeURIComponent(r))}(i=new FileReader).onload=function(e){b(this.result)},i.readAsDataURL(r)}return!0}})?a.apply(t,r):a)||(e.exports=i)},function(e,t,n){"use strict";n.r(t);const a={pencil:!1,chooseColor:!1,paintBucket:!1,eraser:!1,stroke:!1,bucket:!1};function r(e){return document.getElementById("pencil").classList.remove("active"),document.getElementById("paintBucket").classList.remove("active"),document.getElementById("chooseColor").classList.remove("active"),document.getElementById("eraser").classList.remove("active"),document.getElementById("stroke").classList.remove("active"),document.getElementById("bucket").classList.remove("active"),document.getElementById(`${e}`).classList.add("active"),document.getElementById(`${e}`)}let i={paintBucket:"KeyB",chooseColor:"KeyC",pencil:"KeyP",stroke:"KeyS",eraser:"KeyE",bucket:"KeyA"};function s(){a.pencil=!1,a.chooseColor=!1,a.paintBucket=!1,a.eraser=!1,a.stroke=!1,a.bucket=!1,document.getElementById("paintBucket").classList.remove("active"),document.getElementById("chooseColor").classList.remove("active"),document.getElementById("pencil").classList.remove("active"),document.getElementById("stroke").classList.remove("active"),document.getElementById("eraser").classList.remove("active"),document.getElementById("bucket").classList.remove("active")}let o,l=128;function d(e){const t=document.getElementById("canvas");l=e,t.height=e,t.width=e,function(e){document.getElementById("size32").classList.remove("active"),document.getElementById("size64").classList.remove("active"),document.getElementById("size128").classList.remove("active"),document.getElementById(`size${e}`).classList.add("active")}(e);const n=localStorage.getItem("canvas"),a=new Image;a.crossOrigin="Anonymous",a.src=n,a.onload=function(){z.drawImage(a,0,0,l,l)}}function c(e){let t=e.slice(4,e.length-1);return t=t.split(", "),`#${((1<<24)+(+t[0]<<16)+(+t[1]<<8)+ +t[2]).toString(16).slice(1)}`}let f="#ff0000";const u=document.getElementById("canvas");let h,_;const m=[];function g(){const e=document.createElement("canvas");_=e.getContext("2d"),m.push(e);const t=document.createElement("div"),n=document.createElement("button"),a=document.createElement("button");t.classList.add("frame"),n.textContent="duplicate",n.classList.add("duplicate"),a.textContent="delete",a.classList.add("delete"),e.style.width="128px",e.style.height="128px",e.width="128",e.height="128",t.appendChild(e),t.appendChild(n),t.appendChild(a),document.getElementById("addFrames").append(t)}function p(){h&&(_=h);const e=localStorage.getItem("canvas"),t=new Image;t.crossOrigin="Anonymous",t.src=e,_.drawImage(t,0,0,128,128)}function v(){const e=document.getElementById("canvas");z.clearRect(0,0,512,512),_.clearRect(0,0,128,128),z.fillStyle="lightgrey",z.fillRect(0,0,512,512),localStorage.setItem("canvas",e.toDataURL())}n(7),n(8),n(9);const w=n(10),b=n(21);let y=0;function k(){const e=document.getElementById("animation").getContext("2d");let t;try{t=m[y].toDataURL()}catch(e){y=0}const n=new Image;n.crossOrigin="Anonymous",n.src=t,n.onload=function(){e.drawImage(n,0,0,256,256),y+=1,(y===m.length||y>m.length)&&(y=0)}}n.d(t,"ctx",(function(){return z})),n.d(t,"interval",(function(){return L})),n.d(t,"tool",(function(){return a}));let B=!1,I=!1,E=!1;const x=document.getElementById("canvas");x.style.width="512px",x.style.height="512px";const z=x.getContext("2d");z.imageSmoothingEnabled=!1;let S=12,L=1e3/S,A=setInterval(k,L);if(g(),p(),localStorage.getItem("canvas")){const e=localStorage.getItem("canvas"),t=new Image;t.crossOrigin="Anonymous",t.src=e,t.onload=function(){z.strokeStyle=f,z.drawImage(t,0,0,128,128)}}document.getElementById("keys").addEventListener("click",()=>{document.getElementById("swapKeys").style.display="block"}),document.getElementById("continue").addEventListener("click",(function(){let e=document.getElementsByClassName("inputKey"),t=Object.keys(i);for(let n=0;n<e.length;n++)e[n].value>0&&10>e[n].value?i[t[n]]=`Digit${e[n].value}`:i[t[n]]=`Key${e[n].value}`;return document.getElementById("swapKeys").style.display="none",i})),document.getElementById("canvas").addEventListener("mousedown",e=>{if(a.pencil){z.strokeStyle=f,z.beginPath();const t=e.offsetX,n=e.offsetY;z.moveTo(parseInt(t/(512/l)),parseInt(n/(512/l))),B=!0}}),document.getElementById("canvas").addEventListener("mousemove",e=>{if(B){const t=e.offsetX,n=e.offsetY;z.lineTo(parseInt(t/(512/l)),parseInt(n/(512/l))),z.stroke()}}),document.getElementById("canvas").addEventListener("mousedown",e=>{if(a.pencil){const t=e.offsetX,n=e.offsetY;z.strokeStyle=f,z.fillStyle=f,z.fillRect(parseInt(t/(512/l)),parseInt(n/(512/l)),1,1),localStorage.setItem("canvas",x.toDataURL())}}),document.getElementById("canvas").addEventListener("mouseup",()=>{B=!1,I=!1,localStorage.setItem("canvas",x.toDataURL())}),document.addEventListener("mousemove",()=>{E||p(),localStorage.setItem("canvas",x.toDataURL())}),document.getElementById("canvas").addEventListener("mouseleave",()=>{B=!1,I=!1,localStorage.setItem("canvas",x.toDataURL())}),document.getElementById("canvas").addEventListener("click",e=>{a.paintBucket&&function(e){const t=parseInt(u.style.width)/l,n=e.offsetX,a=e.offsetY,r=z.getImageData(parseInt(n/(parseInt(u.style.width,10)/l)),parseInt(a/(parseInt(u.style.height,10)/l)),1,1).data,i=c(`rgb(${r[0]}, ${r[1]}, ${r[2]})`),s=[],o={};for(s.push([n,a]),z.fillStyle=f;s.length>0;){const e=s.pop(),n=e[0],a=e[1];if(!0===o[`${n} ${a}`])continue;o[`${n} ${a}`]=!0;const r=z.getImageData(parseInt(n/(parseInt(u.style.width,10)/l)),parseInt(a/(parseInt(u.style.height,10)/l)),1,1).data;c(`rgb(${r[0]}, ${r[1]}, ${r[2]})`)===i&&(z.fillRect(parseInt(n/(parseInt(u.style.width,10)/l)),parseInt(a/(parseInt(u.style.height,10)/l)),1,1),512!==n&&!0!==o[`${+n+t} ${a}`]&&s.push([+n+t,a]),0!==n&&!0!==o[`${+n-t} ${a}`]&&s.push([+n-t,a]),512!==a&&!0!==o[`${n} ${+a+t}`]&&s.push([n,+a+t]),0!==a&&!0!==o[`${n} ${+a-t}`]&&s.push([n,+a-t]))}localStorage.setItem("canvas",u.toDataURL())}(e)}),document.getElementById("canvas").addEventListener("mousedown",e=>{a.eraser&&(I=!0)}),document.getElementById("canvas").addEventListener("mousemove",e=>{const t=e.offsetX,n=e.offsetY;I&&(z.clearRect(parseInt(t/(512/l)),parseInt(n/(512/l)),1,1),localStorage.setItem("canvas",x.toDataURL()),p())}),document.getElementById("canvas").addEventListener("mousedown",e=>{if(a.stroke){const t=e.offsetX,n=e.offsetY;E=!0,z.strokeStyle=f,z.beginPath(),z.moveTo(parseInt(t/(512/l)),parseInt(n/(512/l)))}}),document.getElementById("canvas").addEventListener("mouseup",e=>{const t=e.offsetX,n=e.offsetY;a.stroke&&(E=!1,z.lineTo(parseInt(t/(512/l)),parseInt(n/(512/l))),z.stroke())}),document.getElementById("addNewFrame").addEventListener("click",()=>{g(),v(),localStorage.setItem("canvas",x.toDataURL())}),document.getElementById("canvas").addEventListener("mousedown",()=>{a.bucket&&(!function(e){z.fillStyle=e,z.fillRect(0,0,512,512),localStorage.setItem("canvas",u.toDataURL())}(f),p())}),document.getElementById("range").addEventListener("input",()=>{document.getElementById("value").value=`${document.getElementById("range").value} fps`,S=document.getElementById("range").value,L=1e3/S,clearInterval(A),0!==S&&(A=setInterval(k,L))}),document.getElementById("canvas").addEventListener("click",(function(e){a.chooseColor&&(!function(e){const t=document.getElementById("canvas"),n=e.offsetX,a=e.offsetY,r=z.getImageData(n/(parseInt(t.style.width,10)/l),a/(parseInt(t.style.height,10)/l),1,1).data,i=c(`rgb(${r[0]}, ${r[1]}, ${r[2]})`);document.getElementById("primaryColor").classList.contains("active")?document.getElementById("inputColorPrimary").value=i:document.getElementById("inputColorSecondary").value=i,o=i}(e),f=o)})),document.getElementById("mainColors").addEventListener("click",(function(e){const{target:t}=e,n=t.closest("div");"main__colors"!==n.className&&(n.classList.add("active"),"primaryColor"===n.id&&(document.getElementById("secondaryColor").classList.remove("active"),f=document.getElementById("inputColorPrimary").value),"secondaryColor"===n.id&&(document.getElementById("primaryColor").classList.remove("active"),f=document.getElementById("inputColorSecondary").value))})),document.getElementById("inputColorPrimary").addEventListener("input",(function(){f=document.getElementById("inputColorPrimary").value})),document.getElementById("inputColorSecondary").addEventListener("input",(function(){f=document.getElementById("inputColorSecondary").value})),document.getElementById("size").addEventListener("click",(function(e){const{target:t}=e;"size32"===t.id&&d(32),"size64"===t.id&&d(64),"size128"===t.id&&d(128)})),document.getElementById("mainItems").addEventListener("click",(function(e){const{target:t}=e,n=t.closest("div");if(a.pencil=!1,a.chooseColor=!1,a.paintBucket=!1,a.eraser=!1,a.stroke=!1,a.bucket=!1,"main__items"!==n.className)return"pencil"===n.id&&(r("pencil"),a.pencil=!0),"paintBucket"===n.id&&(r("paintBucket"),a.paintBucket=!0),"chooseColor"===n.id&&(r("chooseColor"),a.chooseColor=!0),"eraser"===n.id&&(r("eraser"),a.eraser=!0),"stroke"===n.id&&(r("stroke"),a.stroke=!0),"bucket"===n.id&&(r("bucket"),a.bucket=!0),a})),document.addEventListener("keydown",(function(e){e.code===i.paintBucket&&(s(),document.getElementById("paintBucket").classList.add("active"),a.paintBucket=!0),e.code===i.chooseColor&&(s(),document.getElementById("chooseColor").classList.add("active"),a.chooseColor=!0),e.code===i.pencil&&(s(),document.getElementById("pencil").classList.add("active"),a.pencil=!0),e.code===i.stroke&&(s(),document.getElementById("stroke").classList.add("active"),a.stroke=!0),e.code===i.eraser&&(s(),document.getElementById("eraser").classList.add("active"),a.eraser=!0),e.code===i.bucket&&(s(),document.getElementById("bucket").classList.add("active"),a.bucket=!0)})),document.getElementById("clear").addEventListener("click",v),document.getElementById("addFrames").addEventListener("click",(function(e){const{target:t}=e;if(t.closest("canvas")){h=t.getContext("2d");const e=t.toDataURL(),n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){z.drawImage(n,0,0,128,128)}}})),document.getElementById("addFrames").addEventListener("click",(function(e){const{target:t}=e;if(t.classList.contains("delete")){let e;m.map((n,a)=>{n.getContext("2d")===t.previousSibling.previousSibling.getContext("2d")&&(e=a)}),m.splice(e,1),t.closest(".frame").style.display="none";let n=document.getElementsByTagName("canvas")[0].toDataURL();h=document.getElementsByTagName("canvas")[0].getContext("2d"),0===e&&(n=document.getElementsByTagName("canvas")[1].toDataURL(),h=document.getElementsByTagName("canvas")[1].getContext("2d"));const a=new Image;a.crossOrigin="Anonymous",a.src=n,a.onload=function(){z.drawImage(a,0,0,128,128)},p()}})),document.getElementById("addFrames").addEventListener("click",(function(e){const{target:t}=e;if(t.classList.contains("duplicate")){g();const e=t.previousSibling.toDataURL(),n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){z.drawImage(n,0,0,128,128)},localStorage.setItem("canvas",t.previousSibling.toDataURL()),p(),h=null}})),document.getElementById("animation").addEventListener("click",(function(){if("fullscreenEnabled"in document){if(document.fullscreenEnabled){const e=document.getElementById("animation");"requestFullscreen"in e&&e.requestFullscreen()}}else alert("User doesn't allow full screen")})),document.getElementById("gif").addEventListener("click",(function(){const e=new GIFEncoder;e.setRepeat(0),e.setDelay(L),e.start();for(let t=0;t<m.length;t+=1)e.addFrame(m[t].getContext("2d"));e.finish(),e.download("picture")})),document.getElementById("apng").addEventListener("click",(function(){const e=Array.of(m.length).fill(L),t=m.map(e=>e.getContext("2d").getImageData(0,0,l,l).data.buffer),n=w.encode(t,l,l,0,e);b(n,"picture.png","apng")})),window.onunload=()=>{localStorage.setItem("canvas",x.toDataURL())}}]);
//# sourceMappingURL=main.js.map
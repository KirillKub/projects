!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);let a,o,s,c,d=128;function l(e){d=e,canvas.height=e,canvas.width=e,function(e){document.getElementById("size32").classList.remove("active"),document.getElementById("size64").classList.remove("active"),document.getElementById("size128").classList.remove("active"),document.getElementById(`size${e}`).classList.add("active")}(e);const t=localStorage.getItem("canvas"),n=new Image;n.crossOrigin="Anonymous",n.src=t,n.onload=function(){k.drawImage(n,0,0,512/(512/d),512/(512/d))}}function i(e){let t=e.slice(4,e.length-1);return t=t.split(", "),`#${((1<<24)+(+t[0]<<16)+(+t[1]<<8)+ +t[2]).toString(16).slice(1)}`}function r(){let e=document.createElement("canvas");o=e.getContext("2d"),s&&(o=s);let t=document.createElement("div"),n=document.createElement("button"),a=document.createElement("button");t.classList.add("frame"),n.textContent="duplicate",n.classList.add("duplicate"),a.textContent="delete",a.classList.add("delete"),e.style.width="128px",e.style.height="128px",e.width="128",e.height="128",t.appendChild(e),t.appendChild(n),t.appendChild(a),document.getElementById("addFrames").append(t)}function m(){c&&(o=c);const e=localStorage.getItem("canvas"),t=new Image;t.crossOrigin="Anonymous",t.src=e,o.drawImage(t,0,0,128,128)}function u(){k.clearRect(0,0,512,512),o.clearRect(0,0,128,128),k.fillStyle="lightgrey",k.fillRect(0,0,512,512),localStorage.setItem("canvas",canvas.toDataURL())}function v(e){document.getElementById("pencil").classList.remove("active"),document.getElementById("paintBucket").classList.remove("active"),document.getElementById("chooseColor").classList.remove("active"),document.getElementById("eraser").classList.remove("active"),document.getElementById("stroke").classList.remove("active"),document.getElementById("bucket").classList.remove("active"),document.getElementById(`${e}`).classList.add("active")}n.d(t,"color",(function(){return h})),n.d(t,"ctx",(function(){return k})),n.d(t,"ctxValue",(function(){return c})),n.d(t,"canvasData",(function(){return s}));let g=!1,y=!1,I=!1,p=!1,f=!1,E=!1,L=!1,B=!1,h="#ff0000";const S=document.getElementById("canvas");S.style.width="512px",S.style.height="512px";const k=S.getContext("2d");if(k.imageSmoothingEnabled=!1,r(),m(),localStorage.getItem("canvas")){const e=localStorage.getItem("canvas"),t=new Image;t.crossOrigin="Anonymous",t.src=e,t.onload=function(){k.strokeStyle=h,k.drawImage(t,0,0,128,128)}}let w,C;document.getElementById("size").addEventListener("click",e=>{const{target:t}=e;"size32"===t.id&&l(32),"size64"===t.id&&l(64),"size128"===t.id&&l(128)}),document.getElementById("mainItems").addEventListener("click",e=>{y=!1,f=!1,p=!1,E=!1,L=!1,g=!1;const{target:t}=e,n=t.closest("div");"main__items"!==n.className&&("pencil"===n.id&&(v("pencil"),y=!0),"paintBucket"===n.id&&(v("paintBucket"),p=!0),"chooseColor"===n.id&&(v("chooseColor"),f=!0),"eraser"===n.id&&(v("eraser"),E=!0),"stroke"===n.id&&(v("stroke"),L=!0),"bucket"===n.id&&(v("bucket"),g=!0))}),document.getElementById("canvas").addEventListener("mousedown",e=>{if(y){k.strokeStyle=h,k.beginPath();const t=e.offsetX,n=e.offsetY;k.moveTo(parseInt(t/(512/d)),parseInt(n/(512/d))),I=!0}}),document.getElementById("canvas").addEventListener("mousemove",e=>{if(I){const t=e.offsetX,n=e.offsetY;k.lineTo(parseInt(t/(512/d)),parseInt(n/(512/d))),k.stroke()}}),document.getElementById("canvas").addEventListener("mouseup",()=>{I=!1,localStorage.setItem("canvas",S.toDataURL())}),document.getElementById("canvas").addEventListener("mousemove",()=>{m(),c=null}),document.getElementById("canvas").addEventListener("mouseleave",()=>{I=!1,localStorage.setItem("canvas",S.toDataURL())}),document.getElementById("canvas").addEventListener("mousedown",e=>{if(y){const t=e.offsetX,n=e.offsetY;k.strokeStyle=h,k.fillStyle=h,k.fillRect(parseInt(t/(512/d)),parseInt(n/(512/d)),1,1),localStorage.setItem("canvas",S.toDataURL())}}),document.addEventListener("keydown",(function(e){"KeyB"===e.code&&(document.getElementById("paintBucket").classList.add("active"),document.getElementById("pencil").classList.remove("active"),document.getElementById("chooseColor").classList.remove("active"),document.getElementById("canvas").classList.remove("pencil"),document.getElementById("canvas").classList.remove("choose-color"),document.getElementById("canvas").classList.add("paint-bucket")),"KeyC"===e.code&&(document.getElementById("chooseColor").classList.add("active"),document.getElementById("canvas").classList.add("choose-color"),document.getElementById("paintBucket").classList.remove("active"),document.getElementById("pencil").classList.remove("active"),document.getElementById("canvas").classList.remove("pencil"),document.getElementById("canvas").classList.remove("paint-bucket")),"KeyP"===e.code&&(document.getElementById("pencil").classList.add("active"),document.getElementById("canvas").classList.add("pencil"),document.getElementById("paintBucket").classList.remove("active"),document.getElementById("chooseColor").classList.remove("active"),document.getElementById("canvas").classList.remove("choose-color"),document.getElementById("canvas").classList.remove("paint-bucket"))})),document.getElementById("clear").addEventListener("click",u),document.getElementById("mainColors").addEventListener("click",e=>{const{target:t}=e,n=t.closest("div");"main__colors"!==n.className&&(n.classList.add("active"),"primaryColor"===n.id&&(document.getElementById("secondaryColor").classList.remove("active"),h=document.getElementById("inputColorPrimary").value),"secondaryColor"===n.id&&(document.getElementById("primaryColor").classList.remove("active"),h=document.getElementById("inputColorSecondary").value))}),document.getElementById("canvas").addEventListener("click",e=>{f&&(!function(e){const t=e.offsetX,n=e.offsetY,o=k.getImageData(t/(parseInt(canvas.style.width,10)/d),n/(parseInt(canvas.style.height,10)/d),1,1).data,s=`rgb(${o[0]}, ${o[1]}, ${o[2]})`;console.log(o);let c=i(s);document.getElementById("primaryColor").classList.contains("active")?document.getElementById("inputColorPrimary").value=c:document.getElementById("inputColorSecondary").value=c,a=c}(e),h=a)}),document.getElementById("inputColorPrimary").addEventListener("input",()=>{h=document.getElementById("inputColorPrimary").value}),document.getElementById("inputColorSecondary").addEventListener("input",()=>{h=document.getElementById("inputColorSecondary").value}),document.getElementById("canvas").addEventListener("click",e=>{p&&function(e){let t=parseInt(canvas.style.width)/d,n=e.offsetX,a=e.offsetY;const o=k.getImageData(parseInt(n/(parseInt(canvas.style.width,10)/d)),parseInt(a/(parseInt(canvas.style.height,10)/d)),1,1).data,s=i(`rgb(${o[0]}, ${o[1]}, ${o[2]})`),c=[],l={};for(c.push([n,a]),k.fillStyle=h;c.length>0;){const e=c.pop(),n=e[0],a=e[1];if(!0===l[`${n} ${a}`])continue;l[`${n} ${a}`]=!0;const o=k.getImageData(parseInt(n/(parseInt(canvas.style.width,10)/d)),parseInt(a/(parseInt(canvas.style.height,10)/d)),1,1).data;i(`rgb(${o[0]}, ${o[1]}, ${o[2]})`)===s&&(k.fillRect(parseInt(n/(parseInt(canvas.style.width,10)/d)),parseInt(a/(parseInt(canvas.style.height,10)/d)),1,1),n!==d&&!0!==l[`${+n+t} ${a}`]&&c.push([+n+t,a]),0!==n&&!0!==l[`${+n-t} ${a}`]&&c.push([+n-t,a]),a!==d&&!0!==l[`${n} ${+a+t}`]&&c.push([n,+a+t]),0!==a&&!0!==l[`${n} ${+a-t}`]&&c.push([n,+a-t]))}localStorage.setItem("canvas",canvas.toDataURL())}(e)}),document.getElementById("canvas").addEventListener("mousedown",e=>{E&&(B=!0)}),document.getElementById("canvas").addEventListener("mousemove",e=>{const t=e.offsetX,n=e.offsetY;B&&(k.clearRect(parseInt(t/(512/d)),parseInt(n/(512/d)),1,1),localStorage.setItem("canvas",S.toDataURL()),m())}),document.getElementById("canvas").addEventListener("mouseup",()=>{B=!1}),document.getElementById("canvas").addEventListener("mouseleave",()=>{B=!1});let b=!1;document.getElementById("canvas").addEventListener("mousedown",e=>{L&&(w=e.offsetX,C=e.offsetY,b=!0)}),document.getElementById("canvas").addEventListener("mousemove",e=>{const t=e.offsetX,n=e.offsetY;if(b){k.strokeStyle=h,k.clearRect(0,0,S.width,S.height);const e=localStorage.getItem("canvas"),a=new Image;a.crossOrigin="Anonymous",a.src=e,k.drawImage(a,0,0,d,d),k.beginPath(),k.moveTo(parseInt(w/(512/d)),parseInt(C/(512/d))),k.lineTo(parseInt(t/(512/d)),parseInt(n/(512/d))),k.stroke()}}),document.getElementById("canvas").addEventListener("mouseup",e=>{L&&(b=!1)}),document.getElementById("addNewFrame").addEventListener("click",()=>{r(),u(),localStorage.setItem("canvas",S.toDataURL())}),document.getElementById("addFrames").addEventListener("click",e=>{u();let t=e.target;if(t.closest("canvas")){c=t.getContext("2d");const e=t.toDataURL(),n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){k.strokeStyle=h,k.drawImage(n,0,0,128,128)}}}),document.getElementById("addFrames").addEventListener("click",e=>{let t=e.target;if(t.classList.contains("delete")){t.closest(".frame").style.display="none";const e=document.getElementsByTagName("canvas")[0].toDataURL(),n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){k.strokeStyle=h,k.drawImage(n,0,0,128,128)}}if(t.classList.contains("duplicate")){r(),m();const e=t.previousSibling.toDataURL(),n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){k.strokeStyle=h,k.drawImage(n,0,0,128,128)},c=null,s=null}}),document.getElementById("canvas").addEventListener("mousedown",()=>{g&&(!function(e){k.fillStyle=e,k.fillRect(0,0,512,512),localStorage.setItem("canvas",canvas.toDataURL())}(h),m())}),window.onunload=()=>{localStorage.setItem("canvas",S.toDataURL())}}]);
//# sourceMappingURL=main.js.map